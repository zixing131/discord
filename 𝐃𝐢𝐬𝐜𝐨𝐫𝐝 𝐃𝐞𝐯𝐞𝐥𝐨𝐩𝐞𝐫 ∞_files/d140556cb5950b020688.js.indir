(this.webpackJsonp=this.webpackJsonp||[]).push([[34],{10741:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(11)),a=c(n(2)),o=c(n(423)),i=n(952),u=c(n(986)),l=c(n(19)),s=c(n(319)),f=n(1);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){l.default.track(f.AnalyticEvents.BROWSER_HANDOFF_SUCCEEDED,{authenticated:e})}var v=new(function(e){var t,n;function l(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleEnd=function(e){var n=e.handoffToken,r=e.fingerprint,a=u.default.key;null!=a&&u.default.isHandoffAvailable()?t.handleHandoff({handoffKey:a,handoffToken:n,fingerprint:r}):(o.default.setFingerprint(null),(0,i.handoffUnavailable)())},t}n=e,(t=l).prototype=Object.create(n.prototype),t.prototype.constructor=t,d(t,n);var s=l.prototype;return s._initialize=function(){a.default.subscribe(f.ActionTypes.BROWSER_HANDOFF_END,this.handleEnd),a.default.subscribe(f.ActionTypes.BROWSER_HANDOFF_FROM_APP,this.handleHandoff)},s._terminate=function(){a.default.unsubscribe(f.ActionTypes.BROWSER_HANDOFF_END,this.handleEnd),a.default.unsubscribe(f.ActionTypes.BROWSER_HANDOFF_FROM_APP,this.handleHandoff)},s.handleHandoff=function(e){var t=e.handoffKey,n=e.handoffToken,a=e.fingerprint;null!=n?r.default.post({url:f.Endpoints.HANDOFF_EXCHANGE,body:{key:t,handoff_token:n}}).then((function(e){var t=e.body;(0,i.handoffSetUser)(t.user),o.default.loginToken(t.token,!1),p(!0)}),(function(){null!=a&&p(!1),o.default.setFingerprint(a),(0,i.handoffEnd)()})):null!=a?(o.default.setFingerprint(a),p(!1),(0,i.handoffEnd)()):(o.default.setFingerprint(a),(0,i.handoffUnavailable)())},l}(s.default));t.default=v},10742:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AcceptInviteExperimentWrapper=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),a=u(n(9583)),o=n(10749),i=u(n(10750));function u(e){return e&&e.__esModule?e:{default:e}}function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}t.AcceptInviteExperimentWrapper=function(e){return o.AcceptInviteDetailsDesignRefreshExperiment.trackExposure({}),o.AcceptInviteDetailsDesignRefreshExperiment.useExperiment({})[0].showExperimentalInviteDetails?r.createElement(i.default,e):r.createElement(a.default,e)}},10743:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExpirationNoticePlaceholderExperiment=t.ExpirationNoticeMobileEmbedExperiment=t.ExpirationNoticeIOSExperiment=t.ExpirationNoticeMobileWebExperiment=void 0;var r=n(120),a=(0,r.createExperiment)({kind:"user",id:"2021-03_expiration_notice_mobile_web",label:"Show expiration notice on mobile web invite",defaultConfig:{showExpirationNotice:!1},treatments:[{id:1,label:"Show expiration notice",config:{showExpirationNotice:!0}}]});t.ExpirationNoticeMobileWebExperiment=a;var o=(0,r.createExperiment)({kind:"user",id:"2021-03_expiration_notice_ios",label:"Show expiration notice on ios invite",defaultConfig:{showExpirationNotice:!1},treatments:[{id:1,label:"Show expiration notice",config:{showExpirationNotice:!0}}]});t.ExpirationNoticeIOSExperiment=o;var i=(0,r.createExperiment)({kind:"user",id:"2021-03_expiration_notice_ios_embed",label:"Show expiration notice on ios invite embed",defaultConfig:{showExpirationNotice:!1},treatments:[{id:1,label:"Show expiration notice",config:{showExpirationNotice:!0}}]});t.ExpirationNoticeMobileEmbedExperiment=i;var u=(0,r.createExperiment)({kind:"user",id:"2021-03_expiration_notice_ios_placeholder",label:"Update invite placholder to invoke urgency",defaultConfig:{useUrgentPlaceholder:!1,useLinkPlaceholder:!1},treatments:[{id:1,label:"Update placeholder to invoke urgency",config:{useUrgentPlaceholder:!0,useLinkPlaceholder:!1}},{id:2,label:"Update placeholder to link only",config:{useUrgentPlaceholder:!1,useLinkPlaceholder:!0}}]});t.ExpirationNoticePlaceholderExperiment=u},10744:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=n(3),o=(r=n(23))&&r.__esModule?r:{default:r},i=n(1);var u=function(e){var t=null==e?void 0:e.expired_at,n=!function(e){switch(null==e?void 0:e.state){case i.InviteStates.EXPIRED:case i.InviteStates.BANNED:case i.InviteStates.ERROR:case i.InviteStates.RESOLVING:return!1;default:return!0}}(e);return(0,a.useStateFromStores)([o.default],(function(){var t;return null!=o.default.getGuild(null==e||null===(t=e.guild)||void 0===t?void 0:t.id)}))||n||null==t?null:t};t.default=u},10745:function(e,t,n){e.exports=n.p+"07c4931451dfa8c32fc8551b48a89536.svg"},10746:function(e,t,n){e.exports=n.p+"96191331272ece160a85126d54e49f3d.svg"},10747:function(e,t,n){e.exports=n.p+"acb452cda03a99894210f832308c055d.svg"},10748:function(e,t,n){e.exports=n.p+"a580fd6dc66042ed4d0745deae03626c.png"},10749:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AcceptInviteDetailsDesignRefreshExperiment=void 0;var r=(0,n(120).createExperiment)({kind:"user",id:"2021-01_ios_accept_invite_modal_design_refresh",label:"iOS Accept Invite Modal Redesign",defaultConfig:{showExperimentalInviteDetails:!1},treatments:[{id:1,label:"Enables invite details redesign for a given user on iOS",config:{showExperimentalInviteDetails:!0}}]});t.AcceptInviteDetailsDesignRefreshExperiment=r},10750:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=L;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=O();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=n(181),i=n(3),u=n(9346),l=n(9583),s=I(n(9584)),f=n(5081),c=I(n(975)),d=I(n(225)),p=I(n(419)),v=I(n(8078)),h=I(n(19)),m=n(59),g=I(n(10751)),_=n(1),E=I(n(7)),y=I(n(7362));function I(e){return e&&e.__esModule?e:{default:e}}function O(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return O=function(){return e},e}function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function N(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var S,A=N(d.default,{});function b(){return N("div",{className:y.default.centerFlex},void 0,A)}b.displayName="InviteResolving",function(e){e[e.LOADING=0]="LOADING",e[e.DETAILS=1]="DETAILS",e[e.ERROR=2]="ERROR"}(S||(S={}));var R=function(e){var t=null==(null==e?void 0:e.state)&&null==(null==e?void 0:e.channel);if(null==e||null==e.state||t)return S.LOADING;var n=e.state;switch(n){case _.InviteStates.RESOLVED:case _.InviteStates.ACCEPTED:case _.InviteStates.APP_NOT_OPENED:case _.InviteStates.APP_OPENED:case _.InviteStates.ACCEPTING:case _.InviteStates.APP_OPENING:return S.DETAILS;case _.InviteStates.EXPIRED:case _.InviteStates.BANNED:case _.InviteStates.ERROR:return S.ERROR;case _.InviteStates.RESOLVING:return S.LOADING;default:(0,m.assertNever)(n)}};function C(e){var t=e.invite,n=e.onAcceptInvite;switch(null==t?void 0:t.state){case _.InviteStates.BANNED:return N(u.InvalidMobileCodedLinkInner,{text:E.default.Messages.AUTH_BANNED_INVITE_BODY,buttonCta:E.default.Messages.INVITE_INVALID_CTA,onClick:n});default:return N(u.InvalidMobileCodedLinkInner,{text:E.default.Messages.INVITE_INVALID_ERROR,buttonCta:E.default.Messages.INVITE_INVALID_CTA,onClick:n})}}var P=N(b,{}),M=N(b,{});function w(e){var t,n=e.invite,r=a.useState(R(n)),i=r[0],u=r[1],l=a.useRef(null),f=(0,v.default)(l,!0,[i]),c=(0,o.useSpring)({height:(null==f?void 0:f.height)?f.height+"px":"200px",config:o.config.stiff});a.useEffect((function(){var e=R(n);e!==i&&u(e)}),[n,i]);var d=((t={})[S.DETAILS]=y.default.inviteCardInner,t[S.ERROR]=y.default.inviteCardInnerError,t[S.LOADING]=y.default.inviteCardInnerLoading,t);return N(o.animated.div,{className:y.default.inviteCard,style:c},void 0,a.createElement("section",{ref:l,className:d[i]},function(){if(null==n)return P;switch(i){case S.DETAILS:return a.createElement(g.default,T({},e,{invite:n}));case S.ERROR:return a.createElement(C,T({},e,{invite:n}));default:return M}}()),N(s.default,{invite:n,className:y.default.expirationNotice}))}function D(e){return N(p.default,{theme:_.ThemeTypes.DARK,className:y.default.splashBackground,contentClassName:y.default.centerAuthBoxContent},void 0,a.createElement(w,e))}function L(e){var t=e.inviteCode,n=(0,i.useStateFromStores)([c.default],(function(){return c.default.getInvite(t)}));a.useEffect((function(){h.default.track(_.AnalyticEvents.INVITE_VIEWED,{},{flush:!0}),(0,f.trackAppUIViewed)("invite_mobile")}),[]);return N(D,{inviteCode:t,invite:n,onAcceptInvite:function(e){(0,l.openApp)(e,t,n)}})}w.displayName="AcceptInviteCardComponent",D.displayName="InviteContainer",L.displayName="AcceptInviteMobile"},10751:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=y();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=n(430),i=E(n(327)),u=E(n(32)),l=E(n(227)),s=E(n(107)),f=E(n(424)),c=E(n(5170)),d=E(n(322)),p=n(419),v=E(n(61)),h=E(n(173)),m=n(1),g=E(n(7)),_=E(n(7361));function E(e){return e&&e.__esModule?e:{default:e}}function y(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return y=function(){return e},e}function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function O(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var T=function(e){var t,n,r={onlineCount:null!==(t=e.approximate_presence_count)&&void 0!==t?t:0,memberCount:null!==(n=e.approximate_member_count)&&void 0!==n?n:0};return 0===r.memberCount&&0===r.memberCount?null:r},N=function(e){return e.target_type===o.InviteTargetTypes.STREAM&&null!=e.target_user},S=function(e){var t;return(null===(t=e.channel)||void 0===t?void 0:t.type)===m.ChannelTypes.GROUP_DM},A=function(e){return e.state===m.InviteStates.ACCEPTED},b=function(e){return null!=e.inviter&&!A(e)&&!function(e){var t,n=T(e);return(null!==(t=null==n?void 0:n.memberCount)&&void 0!==t?t:0)>100}(e)},R=function(e){var t=e.guild,n=e.user,r=e.application;return r?O(f.default,{className:_.default.appIcon,game:r,size:_.default.appIconSize}):null!=n?O(p.Avatar,{src:n.getAvatarURL(),size:p.Avatar.Sizes.DEPRECATED_SIZE_100,className:_.default.avatar}):null!=t?O(p.GuildIcon,{guild:t,size:p.GuildIcon.Sizes.LARGER,className:_.default.guildIcon,animate:!0}):null};function C(e){var t=e.invite,n=T(t);return null==n||b(t)?null:O(p.ActivityCount,{className:_.default.activityCount,online:n.onlineCount,total:n.memberCount,flat:!0})}function P(e){var t,n,r=e.invite,o=e.showBigUserIcon,i=a.useMemo((function(){return o?null:N(r)&&null!=r.target_user?h.default.getUserAvatarURL(r.target_user):b(r)&&null!=r.inviter?h.default.getUserAvatarURL(r.inviter):null}),[r,o]),u=g.default.Messages.INSTANT_INVITE_YOU_HAVE_BEEN_INVITED_TO_JOIN;S(r)?u=(null===(t=r.channel)||void 0===t?void 0:t.name)&&(null===(n=r.inviter)||void 0===n?void 0:n.username)?g.default.Messages.INSTANT_INVITE_YOU_HAVE_BEEN_INVITED_TO_JOIN_GROUP_DM_BY_USER.format({username:r.inviter.username}):g.default.Messages.INSTANT_INVITE_YOU_HAVE_BEEN_INVITED_TO_JOIN_GROUP_DM:N(r)&&null!=r.target_user?u=g.default.Messages.AUTH_MESSAGE_INVITED_TO_STREAM.format({username:r.target_user.username}):A(r)?u=g.default.Messages.INSTANT_INVITE_YOU_ARE_ALREADY_A_MEMBER_OF:b(r)&&null!=r.inviter&&(u=g.default.Messages.INSTANT_INVITE_YOU_HAVE_BEEN_INVITED_TO_JOIN_BY_USER.format({username:r.inviter.username}));return O("div",{className:_.default.inviteJoinContainer},void 0,i&&O("div",{className:_.default.inviterIconWrapper},void 0,O(p.Avatar,{src:i,size:p.Avatar.Sizes.SIZE_24})),O(p.SubTitle,{className:_.default.inviteJoinSubTitle},void 0,u))}function M(e){var t,n,r,o=e.user,i=e.guild,u=e.channel,l=e.application,s=e.showBigUserIcon,f=e.description;if(null!=i)s&&null==l&&(t=O(p.GuildIcon,{guild:i,size:p.GuildIcon.Sizes.SMALL})),n=i.name,null!=l&&(n=l.name,null==f&&(r=O("div",{className:_.default.inviteJoinContainer},void 0,O(p.SubTitle,{className:_.default.appIn},void 0,g.default.Messages.EMBEDDED_ACTIVITIES_INVITE_IN),O("div",{className:_.default.guildContainer},void 0,O(p.GuildIcon,{guild:i,size:p.GuildIcon.Sizes.SMALL}),O(v.default,{className:_.default.appGuildName,color:v.default.Colors.CUSTOM,tag:"span",size:v.default.Sizes.SIZE_24},void 0,i.name)))));else if(null!=u){if(null==o)throw new Error("no inviter in group DM invite");var h=o.username;u.name?(n=u.name,null!=u.icon&&(t=O(p.ChannelIcon,{channel:u,size:p.Avatar.Sizes.SIZE_32}))):n=h}return a.createElement(a.Fragment,null,O(p.Title,{className:_.default.title},void 0,null!=i?O(c.default,{guild:i,className:_.default.guildBadge,tooltipPosition:d.default.Positions.LEFT}):null,t,n),f&&O("p",{className:_.default.description},void 0,f),r)}C.displayName="InviteMemberCounts",P.displayName="InviteJoinContext";var w=function(e){var t=e.invite,n=e.onAcceptInvite,r=e.disableUser,o=void 0!==r&&r,f=e.description;if(null==t)return null;var c=null!=t.guild?new l.default(t.guild):null,d=null!=t.channel?new u.default(t.channel):null,v=null!=t.target_application?new i.default(t.target_application):null,h=o||null==t.inviter?null:new s.default(t.inviter),E=!(null!=t.approximate_member_count&&t.approximate_member_count>100||null!=c&&c.hasFeature(m.GuildFeatures.COMMUNITY))&&null!=h&&S(t),y=function(e){switch(e.state){case m.InviteStates.ACCEPTING:case m.InviteStates.APP_OPENING:return!0;default:return!1}}(t),T={invite:t,user:h,guild:c,channel:d,application:v};return O("div",{className:_.default.container},void 0,O(R,{application:v,guild:c,user:E?h:null}),a.createElement(P,I({},T,{showBigUserIcon:E})),a.createElement(M,I({},T,{showBigUserIcon:E,description:f})),a.createElement(C,T),O(p.Button,{onClick:n,submitting:y,className:_.default.acceptButton},void 0,g.default.Messages.INSTANT_INVITE_ACCEPT))};w.displayName="AcceptInviteDetails";var D=w;t.default=D},10752:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=(r=n(55))&&r.__esModule?r:{default:r},o=n(708);var i={dump:function(e){var t;performance.memory&&(t={jsHeapSizeLimit:performance.memory.jsHeapSizeLimit,totalJSHeapSize:performance.memory.totalJSHeapSize,usedJSHeapSize:performance.memory.usedJSHeapSize});var n={browser:{name:a.default.name,version:a.default.version},os:{name:a.default.os.family,version:a.default.os.version},memory:t};e(n)},getTimeSinceNavigationStart:function(){return Date.now()-o.navigationStart}};t.default=i},10753:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=g(n(0)),o=h(n(55)),i=h(n(3)),u=h(n(423)),l=h(n(8742)),s=n(5081),f=h(n(10)),c=g(n(419)),d=n(1),p=h(n(7)),v=h(n(408));function h(e){return e&&e.__esModule?e:{default:e}}function m(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return m=function(){return e},e}function g(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=m();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function _(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}i.default.initialize();var y=_(c.AuthSpinner,{}),I=function(e){var t,r;function a(){return e.apply(this,arguments)||this}r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,E(t,r);var i=a.prototype;return i.componentDidMount=function(){var e=(0,l.default)(this.props.location);null!=e&&u.default.authorizeIPAddress(e),(0,s.trackAppUIViewed)("authorize_ip")},i.renderLoginButton=function(){if("Android"===o.default.os.family||"iOS"===o.default.os.family)return null;var e=this.props.transitionTo;return _(c.Button,{onClick:function(){return e(d.Routes.LOGIN)}},void 0,p.default.Messages.LOGIN)},i.renderFailed=function(){return _(c.default,{},void 0,_("img",{alt:"",src:n(10754),className:v.default.marginBottom20}),_(c.Title,{className:v.default.marginBottom8},void 0,p.default.Messages.AUTHORIZATION_EXPIRED),_(c.SubTitle,{className:v.default.marginBottom40},void 0,p.default.Messages.AUTH_EXPIRED_SUGGESTION),this.renderLoginButton())},i.renderSucceeded=function(){return _(c.default,{},void 0,_("img",{alt:"",src:n(10755),className:v.default.marginBottom20}),_(c.Title,{className:v.default.marginBottom8},void 0,p.default.Messages.IP_AUTHORIZATION_SUCCEEDED),_(c.SubTitle,{className:v.default.marginBottom40},void 0,p.default.Messages.AUTH_IP_AUTH_SUCCEEDED_SUGGESTION),this.renderLoginButton())},i.renderDefault=function(){return _(c.default,{},void 0,y,_(c.Title,{},void 0,p.default.Messages.AUTHORIZING))},i.render=function(){var e=this.props,t=e.verifyFailed,n=e.verifySucceeded;return t?this.renderFailed():n?this.renderSucceeded():this.renderDefault()},a}(a.PureComponent);I.displayName="AuthorizeIPAddress",I.defaultProps={transitionTo:function(t){return e.location.assign(t)}};var O=i.default.connectStores([f.default],(function(){return{verifyFailed:f.default.didVerifyFail(),verifySucceeded:f.default.didVerifySucceed()}}))(I);t.default=O}).call(this,n(36))},10754:function(e,t,n){e.exports=n.p+"5ed6422f4a60342227db5d2678ecf911.svg"},10755:function(e,t,n){e.exports=n.p+"004dd8db75dd498bf03f6b0e7fcb51fd.svg"},10756:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=_(n(0)),o=n(5080),i=m(n(3)),u=m(n(11)),l=m(n(8742)),s=n(5081),f=m(n(107)),c=m(n(5298)),d=_(n(419)),p=n(1),v=m(n(7)),h=m(n(408));function m(e){return e&&e.__esModule?e:{default:e}}function g(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return g=function(){return e},e}function _(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=g();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function E(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}i.default.initialize();var I=E(d.default,{},void 0,E(d.AuthSpinner,{})),O=function(e){var t,r;function a(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={busy:!0,success:!1,user:null},t}r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,y(t,r);var i=a.prototype;return i.componentDidMount=function(){var e=this,t=(0,l.default)(this.props.location),n=(0,o.parse)(this.props.location.search);u.default.post({url:p.Endpoints.DISABLE_EMAIL_NOTIFICATIONS,body:{token:t,pixel_uuid:n.hash},oldFormErrors:!0}).then((function(t){var n=t.body.user,r=new f.default(n);e.setState({success:!0,busy:!1,user:r})}),(function(){return e.setState({success:!1,busy:!1})})),(0,s.trackAppUIViewed)("disable_email_notifications")},i.renderBusy=function(){return I},i.renderSuccess=function(){var e=this.props,t=e.defaultRoute,n=e.transitionTo,r=this.state.user;return E(d.default,{},void 0,E(d.Avatar,{src:r?r.getAvatarURL():null,size:d.Avatar.Sizes.DEPRECATED_SIZE_100,className:h.default.marginBottom20}),E(d.Title,{className:h.default.marginBottom8},void 0,v.default.Messages.AUTH_DISABLE_EMAIL_NOTIFICATIONS_SUCCESS_HEADER),E(d.SubTitle,{},void 0,v.default.Messages.AUTH_DISABLE_EMAIL_NOTIFICATIONS_SUCCESS_BODY),E(d.Button,{className:h.default.marginTop40,onClick:function(){return n(t)}},void 0,v.default.Messages.CONTINUE_TO_WEBAPP))},i.renderError=function(){var e=this.props,t=e.defaultRoute,r=e.transitionTo;return E(d.default,{},void 0,E(d.Image,{src:n(10757),className:h.default.marginBottom20}),E(d.Title,{className:h.default.marginBottom8},void 0,v.default.Messages.AUTH_DISABLE_EMAIL_NOTIFICATIONS_FAILURE_HEADER),E(d.SubTitle,{},void 0,v.default.Messages.AUTH_DISABLE_EMAIL_NOTIFICATIONS_FAILURE_BODY),E(d.Button,{className:h.default.marginTop40,onClick:function(){return r(t)}},void 0,v.default.Messages.CONTINUE_TO_WEBAPP))},i.render=function(){var e=this.state,t=e.busy,n=e.success;return t?this.renderBusy():n?this.renderSuccess():this.renderError()},a}(a.PureComponent);O.displayName="DisableEmailNotifications",O.defaultProps={transitionTo:function(t){return e.location.assign(t)}};var T=i.default.connectStores([c.default],(function(){return{defaultRoute:c.default.defaultRoute}}))(O);t.default=T}).call(this,n(36))},10757:function(e,t,n){e.exports=n.p+"4dfc23421736b1eaf2a19bcb16633bad.svg"},10758:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o=P(n(0)),i=R(n(8)),u=R(n(3)),l=R(n(423)),s=R(n(5312)),f=P(n(7807)),c=P(n(949)),d=R(n(9347)),p=n(5081),v=R(n(10)),h=R(n(5298)),m=R(n(7651)),g=R(n(100)),_=R(n(323)),E=P(n(419)),y=P(n(413)),I=R(n(137)),O=R(n(5333)),T=R(n(5098)),N=R(n(7865)),S=n(1),A=R(n(7)),b=R(n(408));function R(e){return e&&e.__esModule?e:{default:e}}function C(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return C=function(){return e},e}function P(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=C();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function M(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function w(e,t,n,r,a,o,i){try{var u=e[o](i),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,a)}function D(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){w(o,r,a,i,u,"next",e)}function u(e){w(o,r,a,i,u,"throw",e)}i(void 0)}))}}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}u.default.initialize(),function(e){e.REGISTER="register",e.LOGIN="login"}(a||(a={}));var G=M(E.AuthSpinner,{}),B=function(e){var t,r;function o(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={error:null,continueOnWeb:!1,currentUser:null,sentVerification:!1,fetchingUser:!1},t.refreshUser=function(){t.setState({fetchingUser:!0}),c.fetchCurrentUser({withAnalyticsToken:!0}).then((function(e){return t.setState({currentUser:e,fetchingUser:!1})})).catch((function(){return t.setState({fetchingUser:!1})}))},t.handleContinue=function(){(0,t.props.transitionTo)(S.Routes.APPLICATION_LIBRARY)},t.handleLogout=function(){var e=t.props.match.params.giftCode;l.default.logout(S.Routes.GIFT_CODE_LOGIN(e))},t.handleResendVerification=function(){l.default.verifyResend(),t.setState({sentVerification:!0})},t.handleAccept=D(regeneratorRuntime.mark((function e(){var n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.props,r=n.transitionTo,null!=(a=n.giftCode)){e.next=3;break}throw new Error("Trying to accept gift before resolve");case 3:return o=t.getCode(),e.prev=4,t.setState({error:null}),e.next=8,s.default.redeemGiftCode(o);case 8:a.premiumSubscriptionType===S.PremiumTypes.TIER_2?r(S.Routes.APPLICATION_STORE):a.premiumSubscriptionType===S.PremiumTypes.TIER_1?r(S.Routes.ACTIVITY):r(S.Routes.APPLICATION_LIBRARY),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),t.setState({error:e.t0});case 14:case"end":return e.stop()}}),e,null,[[4,11]])}))),t}r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,k(t,r);var u,d,v,h=o.prototype;return h.componentDidMount=function(){this.props.authenticated&&this.handleAuthenticated(),(0,p.trackAppUIViewed)("gift_code")},h.componentDidUpdate=function(e){var t=this.props.authenticated,n=this.getCode();n!==this.getCode(e)&&s.default.resolveGiftCode(n,!0,!0),t&&!e.authenticated&&this.handleAuthenticated(),!t&&e.authenticated&&this.setState({currentUser:null})},h.handleAuthenticated=function(){var e=this.state.currentUser;f.fetchLibrary(),null==e&&this.refreshUser()},h.getCode=function(e){return void 0===e&&(e=this.props),e.match.params.giftCode},h.getMode=function(e){return void 0===e&&(e=this.props),e.login?a.LOGIN:a.REGISTER},h.getErrorMessage=function(e){var t=this.props.libraryApplication,n=this.state.error,r=null!=n?n.code:null;return r===S.AbortCodes.INVALID_GIFT_SELF_REDEMPTION?A.default.Messages.GIFT_CONFIRMATION_BODY_SELF_GIFT_NO_PAYMENT:null!=t||r===S.AbortCodes.INVALID_GIFT_REDEMPTION_OWNED?A.default.Messages.GIFT_CODE_AUTH_HELP_TEXT_OWNED.format({libraryLink:S.Routes.APPLICATION_LIBRARY}):e.isClaimed||r===S.AbortCodes.INVALID_GIFT_REDEMPTION_EXHAUSTED?A.default.Messages.GIFT_CODE_AUTH_HELP_TEXT_CLAIMED:null},h.renderSpinner=function(e){return M(E.default,{},void 0,M(E.Title,{},void 0,e),G)},h.renderExpiredInvite=function(){var e=this.props,t=e.defaultRoute,r=e.transitionTo;return M(E.default,{},void 0,M(E.Image,{src:n(9348),className:b.default.marginBottom8}),M(E.Title,{className:(0,i.default)(b.default.marginTop8,b.default.marginBottom8)},void 0,A.default.Messages.GIFT_CODE_AUTH_INVALID_TITLE),M(E.SubTitle,{},void 0,A.default.Messages.GIFT_CODE_AUTH_INVALID_BODY),M(E.Button,{className:(0,i.default)(b.default.marginTop40,b.default.marginBottom8),onClick:function(){return r(t)}},void 0,A.default.Messages.CONTINUE_TO_WEBAPP),M(E.Button,{onClick:function(){return window.open(I.default.getArticleURL(S.HelpdeskArticles.GIFTING),"_blank")},look:E.Button.Looks.LINK},void 0,A.default.Messages.GIFT_CODE_AUTH_INVALID_TIP))},h.renderAppOpened=function(){var e=this;return M(E.default,{},void 0,M(E.Title,{className:b.default.marginBottom8},void 0,A.default.Messages.APP_OPENED_TITLE),M(E.SubTitle,{},void 0,A.default.Messages.APP_OPENED_BODY),M(E.Button,{className:b.default.marginTop40,onClick:function(){return e.setState({continueOnWeb:!0})}},void 0,A.default.Messages.GIFT_CODE_AUTH_CONTINUE_IN_BROWSER))},h.renderVerification=function(e){var t=this.state.sentVerification;return M(E.default,{},void 0,M(E.Image,{src:n(9585),className:b.default.marginBottom8}),M(E.Title,{},void 0,A.default.Messages.GIFT_CODE_AUTH_VERIFICATION_TITLE.format({username:e.username})),M(E.SubTitle,{className:b.default.marginTop20},void 0,A.default.Messages.GIFT_CODE_AUTH_HELP_TEXT_VERIFICATION_REQUIRED),M(E.Button,{disabled:t,className:b.default.marginTop40,onClick:this.handleResendVerification},void 0,t?A.default.Messages.GIFT_CODE_AUTH_VERIFICATION_SENT:A.default.Messages.RESEND_VERIFICATION_EMAIL),M(E.Button,{look:E.Button.Looks.LINK,onClick:this.refreshUser,className:b.default.marginTop8},void 0,A.default.Messages.GIFT_CODE_AUTH_CHECK_VERIFICATION_AGAIN))},h.renderAuthenticated=function(e,t){var n=this.getErrorMessage(e),r=null!=n;return M(E.default,{},void 0,M(O.default,{giftCode:e}),M(E.Button,{disabled:r,className:b.default.marginTop40,onClick:this.handleAccept},void 0,A.default.Messages.GIFT_CODE_AUTH_ACCEPT),null!=n?M(E.SubTitle,{className:b.default.marginTop20},void 0,n):M(E.SubText,{className:b.default.marginTop20},void 0,A.default.Messages.GIFT_CODE_AUTH_LOGGED_IN_AS.format({userTag:t.tag,onLogoutClick:this.handleLogout})))},h.render=function(){var e=this.props,t=e.nativeAppState,n=e.sku,r=e.authenticated,o=e.giftCode,i=e.isResolved,u=e.isAccepting,l=e.transitionTo,s=e.location,f=this.state,c=f.fetchingUser,d=f.continueOnWeb;if(t===S.NativeAppStates.OPEN&&!d)return this.renderAppOpened();if(t===S.NativeAppStates.OPENING)return this.renderSpinner(A.default.Messages.APP_OPENING);if(u)return this.renderSpinner(A.default.Messages.GIFT_CODE_AUTH_ACCEPTING);if(null==o)return i?this.renderExpiredInvite():this.renderSpinner(A.default.Messages.GIFT_CODE_AUTH_RESOLVING);if(i){if(r){var p=this.state.currentUser;return c||null==p?this.renderSpinner(A.default.Messages.GIFT_CODE_AUTH_FETCHING_USER):this.requiresVerification&&null!=p?this.renderVerification(p):this.renderAuthenticated(o,p)}return this.getMode()===a.LOGIN?M(T.default,{giftCodeSKU:n,giftCode:o,transitionTo:l,location:s}):M(N.default,{giftCodeSKU:n,giftCode:o,transitionTo:l,location:s})}return null},u=o,(d=[{key:"requiresVerification",get:function(){var e=this.state.currentUser;return null!=e&&!e.verified}}])&&L(u.prototype,d),v&&L(u,v),o}(o.PureComponent);B.displayName="GiftCode";var j=u.default.connectStores([m.default,g.default,v.default,_.default,h.default,d.default],(function(e){var t=e.match.params.giftCode,n=m.default.get(t),r=null!=n?_.default.get(n.skuId):null;return{giftCode:n,sku:r,libraryApplication:null!=r&&null!=n?y.firstLibraryApplicationForGiftCode(n,r,g.default):null,authenticated:v.default.isAuthenticated(),defaultRoute:h.default.defaultRoute,isResolved:m.default.getIsResolved(t),isAccepting:m.default.getIsAccepting(t),libraryApplicationsFetched:g.default.fetched,nativeAppState:d.default.getState(t)}}))(B);t.default=j},10759:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=x;var r,a=L(n(0)),o=w(n(8)),i=w(n(20)),u=n(334),l=L(n(3)),s=w(n(9347)),f=w(n(977)),c=n(253),d=w(n(8089)),p=w(n(8403)),v=w(n(5313)),h=w(n(5328)),m=n(7774),g=n(7723),_=n(5081),E=n(370),y=w(n(681)),I=w(n(10)),O=w(n(5298)),T=L(n(419)),N=w(n(1068)),S=w(n(5098)),A=w(n(5335)),b=w(n(7865)),R=n(1),C=w(n(7)),P=w(n(7363)),M=w(n(408));function w(e){return e&&e.__esModule?e:{default:e}}function D(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return D=function(){return e},e}function L(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=D();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function G(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}l.default.initialize();var j=G(T.AuthSpinner,{}),U=function(e){var t,r;function a(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleContinue=function(){var e=t.props,n=e.defaultRoute;(0,e.transitionTo)(n)},t}r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,B(t,r);var l=a.prototype;return l.componentDidMount=function(){(0,_.trackAppUIViewed)("guildTemplate"),u.IS_APP_COMPATIBLE_BROWSER||N.default.launch("discord://"+R.Routes.GUILD_TEMPLATE(this.props.code),(function(){}))},l.componentDidUpdate=function(e){this.props.code!==e.code&&p.default.resolveGuildTemplate(this.props.code)},l.renderButton=function(e,t){return u.IS_APP_COMPATIBLE_BROWSER?G(T.Button,{className:M.default.marginTop40,onClick:t},void 0,e):G(T.IncompatibleBrowser,{className:M.default.marginTop40})},l.renderSpinner=function(e){return G(T.default,{},void 0,G(T.Title,{},void 0,e),j)},l.renderInvalidGuildTemplate=function(){return G(T.default,{},void 0,G(T.Image,{src:n(9348),className:M.default.marginBottom8}),G(T.Title,{className:(0,o.default)(M.default.marginTop8,M.default.marginBottom8)},void 0,C.default.Messages.GUILD_TEMPLATE_INVALID_TITLE),G(T.SubTitle,{},void 0,C.default.Messages.GUILD_TEMPLATE_INVALID_SUBTITLE),this.renderButton(C.default.Messages.CONTINUE_TO_WEBAPP,this.handleContinue))},l.renderAppOpened=function(){return G(T.default,{},void 0,G(T.Title,{className:M.default.marginBottom8},void 0,C.default.Messages.APP_OPENED_TITLE),G(T.SubTitle,{},void 0,C.default.Messages.APP_OPENED_BODY),this.renderButton(C.default.Messages.CONTINUE_TO_WEBAPP,this.handleContinue))},l.renderAuthenticatedOrDownload=function(){var e=this.props.guildTemplate;return(0,i.default)(null!=e,"guild template must not be null"),e.state===c.GuildTemplateStates.RESOLVING?G(T.default,{className:P.default.authBox},void 0,G(h.default,{guildTemplate:e})):G(F,{guildTemplate:e})},l.renderContinue=function(){return G(T.default,{},void 0,G(T.Title,{},void 0,C.default.Messages.APP_NOT_OPENED),this.renderButton(C.default.Messages.CONTINUE_TO_WEBAPP,this.handleContinue))},l.render=function(){var e=this.props,t=e.guildTemplate,n=e.nativeAppState,r=e.authenticated,a=e.transitionTo,o=e.location;if(null==t)return this.renderSpinner(C.default.Messages.LOADING);if(n===R.NativeAppStates.OPEN)return this.renderAppOpened();if(n===R.NativeAppStates.OPENING)return this.renderSpinner(C.default.Messages.APP_OPENING);switch(t.state){case c.GuildTemplateStates.RESOLVING:return this.renderSpinner(C.default.Messages.APP_OPENING);case c.GuildTemplateStates.RESOLVED:return r||!u.IS_APP_COMPATIBLE_BROWSER?this.renderAuthenticatedOrDownload():this.props.login?G(S.default,{guildTemplate:t,transitionTo:a,location:o}):G(b.default,{guildTemplate:t,transitionTo:a,location:o,onRegister:function(){(0,m.setNewUser)(g.NewUserTypes.ORGANIC_REGISTERED_GUILD_TEMPLATE),y.default.flowStart(E.FlowType.ORGANIC_GUILD_TEMPLATES,E.RegistrationSteps.NUF_STARTED)}});case c.GuildTemplateStates.EXPIRED:return this.renderInvalidGuildTemplate();default:return null}},a}(a.PureComponent);function x(e){var t={guildTemplate:(0,l.useStateFromStores)([f.default],(function(){return f.default.getGuildTemplate(e.code)})),nativeAppState:(0,l.useStateFromStores)([s.default],(function(){return s.default.getState(e.code)})),authenticated:(0,l.useStateFromStores)([I.default],(function(){return I.default.isAuthenticated()})),guestLurker:(0,l.useStateFromStores)([I.default],(function(){return I.default.isGuest()})),defaultRoute:(0,l.useStateFromStores)([O.default],(function(){return O.default.defaultRoute}))};return a.createElement(U,k({},e,t))}function F(e){var t=e.guildTemplate,n=(0,d.default)(t,!1),r=n.form,o=n.handleSubmit;y.default.flowStep(E.FlowType.ORGANIC_GUILD_TEMPLATES,E.CreateGuildSteps.GUILD_CREATE);var i=a.createElement(a.Fragment,null,G(T.Title,{className:P.default.header},void 0,C.default.Messages.GUILD_TEMPLATE_SETUP_DISCORD),r,G(T.Button,{className:P.default.createButton,onClick:o},void 0,C.default.Messages.GUILD_TEMPLATE_CREATE_DISCORD)),u=G(v.default,{guildTemplate:t});return G(A.default,{className:P.default.authBox},void 0,(function(){return[u,G("div",{className:P.default.formContainer},void 0,i)]}))}U.displayName="GuildTemplate",x.displayName="ConnectedGuildTemplate",F.displayName="GuildTemplateAuthBox"},10760:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=S;var r,a=I(n(0)),o=I(n(3)),i=E(n(977)),u=n(253),l=E(n(8403)),s=E(n(5328)),f=n(5081),c=E(n(10)),d=E(n(225)),p=I(n(419)),v=E(n(19)),h=E(n(9346)),m=n(1),g=E(n(7)),_=E(n(408));function E(e){return e&&e.__esModule?e:{default:e}}function y(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return y=function(){return e},e}function I(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=y();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function O(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function T(e,t,n){e.preventDefault(),v.default.track(m.AnalyticEvents.GUILD_TEMPLATE_APP_OPENED,{guild_template_code:t,guild_template_name:n.name,guild_template_description:n.description,guild_template_guild_id:n.sourceGuildId});var r=c.default.getFingerprint(),a=null!=r?r:c.default.getId();l.default.openMobileApp(n.state===u.GuildTemplateStates.RESOLVED?t:void 0,a)}o.default.initialize();var N=O(p.default,{},void 0,O(d.default,{}));function S(e){var t=e.code,n=(0,o.useStateFromStores)([i.default],(function(){return i.default.getGuildTemplate(t)}));return a.useEffect((function(){(0,f.trackAppUIViewed)("guild_template_mobile")}),[]),null==n||n.state===u.GuildTemplateStates.RESOLVING?N:n.state===u.GuildTemplateStates.RESOLVED?O(p.default,{},void 0,O(s.default,{guildTemplate:n,tall:!0}),O(p.Button,{onClick:function(e){return T(e,t,n)},className:_.default.marginTop20},void 0,g.default.Messages.GUILD_TEMPLATE_OPEN)):O(h.default,{text:g.default.Messages.GUILD_TEMPLATE_MOBILE_INVALID_ERROR,buttonCta:g.default.Messages.GUILD_TEMPLATE_MOBILE_INVALID_CTA,onClick:function(e){return T(e,t,n)}})}S.displayName="GuildTemplateMobile"},10761:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=D(n(0)),o=M(n(8)),i=n(334),u=n(368),l=M(n(3)),s=M(n(1004)),f=M(n(178)),c=M(n(8125)),d=M(n(9347)),p=n(7774),v=n(7723),h=n(47),m=n(5081),g=M(n(10)),_=M(n(5298)),E=M(n(975)),y=D(n(419)),I=M(n(19)),O=M(n(137)),T=n(7608),N=M(n(1068)),S=M(n(5316)),A=M(n(5098)),b=M(n(7865)),R=n(1),C=M(n(7)),P=M(n(408));function M(e){return e&&e.__esModule?e:{default:e}}function w(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return w=function(){return e},e}function D(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=w();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function L(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}l.default.initialize();var B="register",j="login",U=L(y.AuthSpinner,{}),x=function(e){var t,r;function a(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={error:null},t.getAcceptInviteContext=function(e){return s.default.getInviteContext(e,t.props.invite)},t.handleContinue=function(){var e=t.props,n=e.invite,r=e.transitionTo;null!=n.channel&&s.default.transitionToInvite(n,r)},t.handleAccept=function(){t.setState({error:null});var e=t.props.invite,n=t.getCode();s.default.acceptInvite(n,t.getAcceptInviteContext("Accept Invite Page"),(function(){null!=e.channel&&s.default.openApp(n,e.channel.id)})).catch((function(e){if(e instanceof f.default){var n=(0,T.getInviteError)(e.code);t.setState({error:n})}else t.setState({error:C.default.Messages.INVITE_MODAL_ERROR_DEFAULT})}))},t.handleDefaultTransition=function(){var e=t.props,n=e.defaultRoute;(0,e.transitionTo)(n)},t}r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,G(t,r);var l=a.prototype;return l.componentDidMount=function(){var e=this.props,t=e.isUnderage,n=e.login;if(I.default.track(R.AnalyticEvents.INVITE_VIEWED,{},{flush:!0}),(0,m.trackAppUIViewed)("invite"),!i.IS_APP_COMPATIBLE_BROWSER){var r=this.getCode();N.default.launch("discord://"+R.Routes.INVITE(r),(function(){}))}!n&&t&&(0,h.replaceWith)(R.Routes.INVITE_LOGIN(this.getCode()))},l.componentDidUpdate=function(e){var t=this.props,n=t.invite,r=t.nativeAppState,a=t.authenticated,o=t.transitionTo,i=t.guestLurker,l=this.getCode();if(l!==this.getCode(e))s.default.resolveInvite(l,"Accept Invite Page");else if(n.state===R.InviteStates.APP_NOT_OPENED)this.handleContinue();else if(this.getMode()===j&&a!==e.authenticated&&a){var f=g.default.getFingerprint();if(null!=f){var c=(0,u.extractId)(f);this.track(R.AnalyticEvents.INVITE_LOGIN_SUCCESSFUL,!0,{prev_user_id:c})}s.default.acceptInvite(l,this.getAcceptInviteContext("Accept Invite Page"),this.handleContinue)}(r!==e.nativeAppState&&r===R.NativeAppStates.OPEN&&this.track(R.AnalyticEvents.INVITE_APP_INVOKED,!1),this.getMode()===B&&a&&!e.authenticated)&&(null!=n.channel&&((0,p.setNewUser)(v.NewUserTypes.INVITE_UNCLAIMED),s.default.transitionToInvite(n,o)));null!=n.guest_token&&i&&n.state===R.InviteStates.RESOLVED&&r===R.NativeAppStates.OPEN_FAIL&&setTimeout(this.handleContinue,300)},l.getCode=function(e){return void 0===e&&(e=this.props),e.inviteCode},l.getMode=function(e){return void 0===e&&(e=this.props),e.login?j:B},l.track=function(e,t,n){void 0===n&&(n=null);var r=this.props.invite,a=this.getCode(),o=t?{guild_id:r.guild?r.guild.id:null,channel_id:r.channel?r.channel.id:null,inviter_id:r.inviter?r.inviter.id:null,invite_code:a}:{invite_code:a};I.default.track(e,k({},o,{},n))},l.renderButton=function(e,t){return void 0===t&&(t=this.handleDefaultTransition),i.IS_APP_COMPATIBLE_BROWSER?L(y.Button,{className:P.default.marginTop40,onClick:t},void 0,e):L(y.IncompatibleBrowser,{className:P.default.marginTop40})},l.renderSpinner=function(e){return L(y.default,{},void 0,L(y.Title,{},void 0,e),U)},l.renderInvalidInvite=function(e){return void 0===e&&(e=!1),L(y.default,{},void 0,L(y.Image,{src:n(9348),className:P.default.marginBottom8}),L(y.Title,{className:(0,o.default)(P.default.marginTop8,P.default.marginBottom8)},void 0,C.default.Messages.AUTH_INVALID_INVITE_TITLE),L(y.SubTitle,{},void 0,e?C.default.Messages.AUTH_BANNED_INVITE_BODY:C.default.Messages.AUTH_INVALID_INVITE_BODY),this.renderButton(C.default.Messages.CONTINUE_TO_WEBAPP),L(y.Button,{onClick:function(){return window.open(O.default.getArticleURL(R.HelpdeskArticles.INVALID_INVITES),"_blank")},look:y.Button.Looks.LINK,className:P.default.marginTop8},void 0,C.default.Messages.AUTH_INVALID_INVITE_TIP))},l.renderErrorInvite=function(){return L(y.default,{},void 0,L(S.default,{invite:this.props.invite,error:this.state.error}),this.renderButton(C.default.Messages.INSTANT_INVITE_ACCEPT,this.handleAccept))},l.renderExpiredInvite=function(){return this.renderInvalidInvite(!1)},l.renderBannedInvite=function(){return this.renderInvalidInvite(!0)},l.renderAppOpened=function(){return L(y.default,{},void 0,L(y.Title,{className:P.default.marginBottom8},void 0,C.default.Messages.APP_OPENED_TITLE),L(y.SubTitle,{},void 0,C.default.Messages.APP_OPENED_BODY),this.renderButton(C.default.Messages.CONTINUE_TO_WEBAPP,this.handleContinue))},l.renderAuthenticatedOrDownload=function(){var e=this.props.invite;return L(y.default,{},void 0,L(S.default,{invite:e}),this.renderButton(C.default.Messages.INSTANT_INVITE_ACCEPT,this.handleAccept))},l.renderContinue=function(){return L(y.default,{},void 0,L(y.Title,{},void 0,C.default.Messages.APP_NOT_OPENED),this.renderButton(C.default.Messages.CONTINUE_TO_WEBAPP))},l.render=function(){var e=this,t=this.props,n=t.invite,r=t.nativeAppState,a=t.authenticated,o=t.guestLurker,u=t.transitionTo,l=t.location;if(r===R.NativeAppStates.OPEN)return this.renderAppOpened();switch(n.state){case R.InviteStates.APP_OPENED:return this.renderAppOpened();case R.InviteStates.APP_NOT_OPENED:return this.renderContinue();case R.InviteStates.RESOLVING:case R.InviteStates.APP_OPENING:return this.renderSpinner(C.default.Messages.APP_OPENING);case R.InviteStates.RESOLVED:return a||!i.IS_APP_COMPATIBLE_BROWSER?this.renderAuthenticatedOrDownload():null!=n.guest_token&&o?this.renderSpinner(C.default.Messages.INSTANT_INVITE_RESOLVED_TITLE):this.getMode()===j?L(A.default,{invite:n,transitionTo:u,location:l}):L(b.default,{invite:n,onLoginStart:function(){return e.track(R.AnalyticEvents.INVITE_LOGIN,!0)},location:l,transitionTo:u});case R.InviteStates.ACCEPTING:return this.renderSpinner(C.default.Messages.INSTANT_INVITE_ACCEPTING);case R.InviteStates.EXPIRED:return this.renderExpiredInvite();case R.InviteStates.BANNED:return this.renderBannedInvite();case R.InviteStates.ERROR:return this.renderErrorInvite();case R.InviteStates.ACCEPTED:default:return null}},a}(a.PureComponent);x.displayName="Invite";var F=l.default.connectStores([E.default,_.default,g.default,d.default,c.default],(function(e){var t=e.inviteCode;return{invite:E.default.getInvite(t)||{},nativeAppState:d.default.getState(t),authenticated:g.default.isAuthenticated(),guestLurker:g.default.isGuest(),defaultRoute:_.default.defaultRoute,isUnderage:c.default.isUnderageAnonymous()}}))(x);t.default=F},10762:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=I(n(0)),o=E(n(8)),i=n(5080),u=E(n(3)),l=E(n(423)),s=E(n(8742)),f=E(n(9586)),c=n(5081),d=E(n(10)),p=I(n(419)),v=n(114),h=n(357),m=n(1),g=E(n(7)),_=E(n(408));function E(e){return e&&e.__esModule?e:{default:e}}function y(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return y=function(){return e},e}function I(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=y();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function O(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function T(e,t,n,r,a,o,i){try{var u=e[o](i),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,a)}function N(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){T(o,r,a,i,u,"next",e)}function u(e){T(o,r,a,i,u,"throw",e)}i(void 0)}))}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}u.default.initialize();var A=function(e){var t,r;function a(t){var n;(n=e.call(this,t)||this).handleSubmit=function(){var e=N(regeneratorRuntime.mark((function e(t){var r,a,o,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.props.location,a=n.state,o=a.password,i=a.error,null!=t&&t.preventDefault(),0!==o.length){e.next=9;break}return n.setState({error:g.default.Messages.PASSWORD_REQUIRED}),v.ComponentDispatch.dispatch(m.ComponentActions.WAVE_EMPHASIZE),e.abrupt("return");case 9:null!=i&&n.setState({error:null});case 10:if(null!=(u=(0,s.default)(r))){e.next=13;break}return e.abrupt("return");case 13:return n.setState({working:!0}),e.prev=14,e.next=17,l.default.resetPassword(u,o);case 17:e.sent&&n.handlePasswordChangeSuccess(),e.next=23;break;case 21:e.prev=21,e.t0=e.catch(14);case 23:n.setState({working:!1});case 24:case"end":return e.stop()}}),e,null,[[14,21]])})));return function(t){return e.apply(this,arguments)}}(),n.handleTokenSubmit=function(){var e=N(regeneratorRuntime.mark((function e(t){var r,a,o,i,u,f,c,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.props,a=r.location,o=r.mfaTicket,i=n.state,u=i.code,f=i.password,c=i.error,null!=t&&t.preventDefault(),0!==f.length){e.next=9;break}return n.setState({error:g.default.Messages.PASSWORD_REQUIRED}),v.ComponentDispatch.dispatch(m.ComponentActions.WAVE_EMPHASIZE),e.abrupt("return");case 9:null!=c&&n.setState({error:null});case 10:if(null!=(d=(0,s.default)(a))){e.next=13;break}return e.abrupt("return");case 13:return n.setState({working:!0}),e.prev=14,e.next=17,l.default.resetPasswordMFA(u,o,f,d);case 17:n.handlePasswordChangeSuccess(),e.next=22;break;case 20:e.prev=20,e.t0=e.catch(14);case 22:n.setState({working:!1});case 23:case"end":return e.stop()}}),e,null,[[14,20]])})));return function(t){return e.apply(this,arguments)}}(),n.handlePasswordChangeSuccess=function(){var e=n.props.replaceWith;h.isTablet||h.isMobile?n.setState({success:!0}):e(m.Routes.APP)},n.handleGoToLogin=function(){var e=n.props.transitionTo;l.default.loginReset(),e(m.Routes.LOGIN)},n.isSubmitting=function(){var e=n.props.loginStatus;return n.state.working||e===m.LoginStates.LOGGING_IN_MFA},n.handleOpenApp=function(){(0,f.default)("password_reset")},n.hasError=function(e){return null!=n.props.errors[e]||null!=n.state.error},n.renderError=function(e){var t=n.props.errors;if(n.hasError(e)){var r=t[e];return Array.isArray(r)?r[0]:r}return null};var r=n.props.location.search?(0,i.parse)(n.props.location.search):null;return n.state={password:"",code:"",error:null,hasCancel:null!=r&&null!=r.from_login,working:!1,success:!1},n}r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,S(t,r);var u=a.prototype;return u.componentDidMount=function(){(0,c.trackAppUIViewed)("reset_password")},u.renderPasswordReset=function(){var e=this,t=this.state,r=t.password,a=t.error,o=t.hasCancel,i=this.isSubmitting(),u=a||this.renderError("password");return O(p.default,{onSubmit:this.handleSubmit,tag:"form"},void 0,O("img",{alt:"",src:n(null==u?9349:9587),className:_.default.marginBottom20}),O(p.Title,{},void 0,g.default.Messages.RESET_PASSWORD_TITLE),O(p.Block,{className:_.default.marginTop20},void 0,O(p.Input,{label:g.default.Messages.FORM_LABEL_NEW_PASSWORD,className:_.default.marginBottom20,name:"password",value:r,onChange:function(t){return e.setState({password:t})},error:u,type:"password"}),O(p.Button,{type:"submit",submitting:i},void 0,g.default.Messages.CHANGE_PASSWORD),o?O(p.Button,{className:_.default.marginTop8,onClick:this.handleGoToLogin,submitting:i,color:p.Button.Colors.GREY},void 0,g.default.Messages.CANCEL):null))},u.renderMFA=function(){var e=this,t=this.state.error||this.renderError("code");return O(p.default,{onSubmit:this.handleTokenSubmit,tag:"form"},void 0,O("img",{alt:"",src:n(null==t?9349:9587),className:(0,o.default)(_.default.marginBottom20,h.isMobile?_.default.marginTop20:"")}),O(p.Title,{className:_.default.marginBottom8},void 0,g.default.Messages.TWO_FA_ENTER_TOKEN_LABEL),O(p.SubTitle,{},void 0,g.default.Messages.TWO_FA_ENTER_TOKEN_BODY),O(p.Block,{className:_.default.marginTop20},void 0,O(p.Input,{className:_.default.marginBottom8,error:t,onChange:function(t){return e.setState({code:t})},autoComplete:"off",placeholder:g.default.Messages.TWO_FA_AUTH_CODE,spellCheck:"false",maxLength:10,autoFocus:!0,value:this.state.code}),O(p.Button,{type:"submit",submitting:this.isSubmitting()},void 0,g.default.Messages.LOGIN)))},u.renderSucceeded=function(){return O(p.default,{},void 0,O("img",{alt:"",src:n(9349),className:(0,o.default)(_.default.marginBottom20,h.isMobile?_.default.marginTop20:"")}),O(p.Title,{className:_.default.marginBottom40},void 0,g.default.Messages.RESET_PASSWORD_SUCCESS_TITLE),O(p.Button,{onClick:this.handleOpenApp},void 0,g.default.Messages.VERIFICATION_OPEN_DISCORD))},u.render=function(){return this.state.success?this.renderSucceeded():this.props.mfaTicket?this.renderMFA():this.renderPasswordReset()},a}(a.PureComponent);A.displayName="ResetPassword",A.defaultProps={transitionTo:function(t){return e.location.assign(t)},replaceWith:function(t){return e.location.replace(t)}};var b=u.default.connectStores([d.default],(function(){return{loginStatus:d.default.getLoginStatus(),mfaTicket:d.default.getMFATicket(),errors:d.default.getErrors()}}))(A);t.default=b}).call(this,n(36))},10763:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=N(n(0)),o=O(n(8)),i=n(101),u=O(n(3)),l=O(n(423)),s=O(n(8742)),f=O(n(9586)),c=n(5081),d=O(n(10)),p=O(n(5344)),v=N(n(419)),h=O(n(19)),m=n(5342),g=n(1),_=O(n(7)),E=O(n(7364)),y=O(n(972)),I=O(n(408));function O(e){return e&&e.__esModule?e:{default:e}}function T(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return T=function(){return e},e}function N(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=T();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function S(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}u.default.initialize();var b=function(e){var t,r;function a(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleVerify=function(e){void 0===e&&(e=null);var n=(0,s.default)(t.props.location);null!=n&&l.default.verify(n,e)},t.handleLogin=function(){(0,t.props.transitionTo)(g.Routes.LOGIN)},t.handleOpenApp=function(){var e=t.props.verifyingUserId;h.default.track(g.AnalyticEvents.VERIFY_ACCOUNT_APP_OPENED,{verifying_user_id:e}),(0,f.default)("verify_email")},t}r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,A(t,r);var u=a.prototype;return u.componentDidMount=function(){this.handleVerify(),(0,c.trackAppUIViewed)("verify_email")},u.renderVerifyCaptcha=function(){var e=this.props.verifyErrors;return S(v.default,{},void 0,S(v.Image,{src:n(9588),className:(0,o.default)(E.default.image,I.default.marginBottom20)}),S(v.Title,{className:I.default.marginBottom8},void 0,_.default.Messages.VERIFICATION_VERIFYING),S(v.SubTitle,{className:I.default.marginBottom40},void 0,_.default.Messages.VERIFICATION_BODY_ALT),S("div",{className:y.default.flexCenter},void 0,S(p.default,{captchaService:(0,m.parseCaptchaType)(e.captcha_service),sitekey:e.captcha_sitekey,className:E.default.recaptcha,theme:i.ThemeTypes.DARK,onVerify:this.handleVerify})))},u.renderVerifyFailed=function(){return S(v.default,{},void 0,S(v.Image,{src:n(10764),className:(0,o.default)(E.default.image,I.default.marginBottom20)}),S(v.Title,{className:I.default.marginBottom8},void 0,_.default.Messages.VERFICATION_EXPIRED),S(v.SubTitle,{className:I.default.marginBottom40},void 0,_.default.Messages.AUTH_VERFICATION_EXPIRED_SUGGESTION),S(v.Button,{onClick:this.handleLogin},void 0,_.default.Messages.LOGIN))},u.renderVerifySucceeded=function(){return S(v.default,{},void 0,S(v.Image,{src:n(9588),className:(0,o.default)(E.default.image,I.default.marginBottom20)}),S(v.Title,{className:I.default.marginBottom40},void 0,_.default.Messages.VERIFICATION_VERIFIED),S(v.Button,{onClick:this.handleOpenApp},void 0,_.default.Messages.VERIFICATION_OPEN_DISCORD))},u.renderVerifying=function(){return S(v.default,{},void 0,S(v.Image,{src:n(9585),className:(0,o.default)(E.default.image,I.default.marginBottom20)}),S(v.Title,{className:I.default.marginBottom8},void 0,_.default.Messages.VERIFICATION_VERIFYING),S(v.SubTitle,{className:I.default.marginBottom40},void 0,_.default.Messages.ACTION_MAY_TAKE_A_MOMENT),S(v.Button,{submitting:!0,color:v.Button.Colors.PRIMARY}))},u.render=function(){var e=this.props,t=e.verifyErrors,n=e.verifyFailed,r=e.verifySucceeded;return null!=t&&t.captcha_key?this.renderVerifyCaptcha():n?this.renderVerifyFailed():r?this.renderVerifySucceeded():this.renderVerifying()},a}(a.PureComponent);b.displayName="VerifyEmail",b.defaultProps={transitionTo:function(t){return e.location.assign(t)}};var R=u.default.connectStores([d.default],(function(){return{verifyFailed:d.default.didVerifyFail(),verifyErrors:d.default.getVerifyErrors(),verifySucceeded:d.default.didVerifySucceed(),fingerprint:d.default.getFingerprint(),verifyingUserId:d.default.getVerifyingUserId()}}))(b);t.default=R}).call(this,n(36))},10764:function(e,t,n){e.exports=n.p+"1a06a76c7ea3e0facf0d6635e10c5898.svg"},5080:function(e,t,n){"use strict";var r=n(5307),a=n(359),o=n(5308);function i(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e,t){var n=function(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return function(e,n,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t=a({arrayFormat:"none"},t)),r=Object.create(null);return"string"!=typeof e?r:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),a=t.shift(),i=t.length>0?t.join("="):void 0;i=void 0===i?null:o(i),n(o(a),i,r)})),Object.keys(r).sort().reduce((function(e,t){var n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((function(e,t){return Number(e)-Number(t)})).map((function(e){return t[e]})):t}(n):e[t]=n,e}),Object.create(null))):r},t.stringify=function(e,t){var n=function(e){switch(e.arrayFormat){case"index":return function(t,n,r){return null===n?[i(t,e),"[",r,"]"].join(""):[i(t,e),"[",i(r,e),"]=",i(n,e)].join("")};case"bracket":return function(t,n){return null===n?i(t,e):[i(t,e),"[]=",i(n,e)].join("")};default:return function(t,n){return null===n?i(t,e):[i(t,e),"=",i(n,e)].join("")}}}(t=a({encode:!0,strict:!0,arrayFormat:"none"},t));return e?Object.keys(e).sort().map((function(r){var a=e[r];if(void 0===a)return"";if(null===a)return i(r,t);if(Array.isArray(a)){var o=[];return a.slice().forEach((function(e){void 0!==e&&o.push(n(r,e,o.length))})),o.join("&")}return i(r,t)+"="+i(a,t)})).filter((function(e){return e.length>0})).join("&"):""}},5094:function(e,t,n){e.exports=n.p+"0f4d1ff76624bb45a3fee4189279ee92.svg"},5098:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=x(n(0)),o=j(n(8)),i=n(5080),u=n(3),l=j(n(423)),s=n(952),f=j(n(5371)),c=j(n(976)),d=j(n(5313)),p=j(n(5184)),v=j(n(5392)),h=j(n(5393)),m=n(5081),g=j(n(10)),_=j(n(986)),E=j(n(5298)),y=j(n(60)),I=x(n(419)),O=j(n(945)),T=n(46),N=j(n(61)),S=j(n(19)),A=n(5342),b=n(114),R=n(357),C=j(n(5343)),P=j(n(5333)),M=x(n(5316)),w=j(n(5399)),D=j(n(5335)),L=n(1),k=j(n(7)),G=j(n(5458)),B=j(n(408));function j(e){return e&&e.__esModule?e:{default:e}}function U(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return U=function(){return e},e}function x(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=U();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function V(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function W(e,t,n,r,a,o,i){try{var u=e[o](i),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,a)}function H(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){W(o,r,a,i,u,"next",e)}function u(e){W(o,r,a,i,u,"throw",e)}i(void 0)}))}}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Y=V(I.AuthSpinner,{}),$=V(M.InviteResolvingHeader,{}),Z=function(e){var t,r;function u(t){var n;(n=e.call(this,t)||this).handleAuthToken=function(){var e=H(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.default.loginToken(t,!1);case 2:S.default.track(L.AnalyticEvents.LOGIN_SUCCESSFUL,{source:L.LoginSuccessfulSources.QR_CODE,login_source:n.loginSource,gift_code_sku_id:n.giftCodeSKUId,is_new_user:!1});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.setLoginRef=function(e){n.loginRef=e},n.setPasswordRef=function(e){n.passwordRef=e},n.setCodeRef=function(e){n.codeRef=e},n.getFullLogin=function(){var e=n.state;return e.loginPrefix+e.login},n.renderError=function(e){var t=n.props.errors;if(n.hasError(e)){var r=t[e];return Array.isArray(r)?r[0]:r}return null},n.handleLogin=function(e){var t=n.state,r=t.password,a=t.captchaKey,o=t.undelete;null!=e&&e.preventDefault(),n.setState({captchaCallback:n.handleLogin,captchaKey:null}),l.default.login({login:n.getFullLogin(),password:r,undelete:o,captchaKey:a,source:n.loginSource,giftCodeSKUId:n.giftCodeSKUId}),b.ComponentDispatch.dispatch(L.ComponentActions.WAVE_EMPHASIZE)},n.handleIPAuthorize=function(){var e=H(regeneratorRuntime.mark((function e(t){var r,a,o,i,u,s,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.state,a=r.password,o=r.captchaKey,i=r.undelete,n.setState({phoneVerifyError:null,captchaKey:null}),u=n.getFullLogin(),e.prev=3,e.next=6,p.default.verifyPhone(u,t,!1);case 6:return s=e.sent,f=s.token,e.next=10,l.default.authorizeIPAddress(f);case 10:l.default.login({login:u,password:a,undelete:i,captchaKey:o,source:n.loginSource,giftCodeSKUId:n.giftCodeSKUId}),b.ComponentDispatch.dispatch(L.ComponentActions.WAVE_EMPHASIZE),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),null!=e.t0.body&&null!=e.t0.body.message&&n.setState({phoneVerifyError:e.t0.body.message});case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}(),n.handlePasswordReset=function(){var e=H(regeneratorRuntime.mark((function e(t){var r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props.transitionTo,n.setState({phoneVerifyError:null}),e.prev=2,e.next=5,p.default.verifyPhone(n.getFullLogin(),t,!1);case 5:a=e.sent,o=a.token,r(L.Routes.RESET,{search:(0,i.stringify)({token:o,from_login:"true"})}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),null!=e.t0.body&&null!=e.t0.body.message&&n.setState({phoneVerifyError:e.t0.body.message});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),n.handleTokenSubmit=function(e){var t=n.state.code,r=n.props.mfaTicket;null!=e&&e.preventDefault(),l.default.loginMFA({code:t.replace(/ /g,""),ticket:r,source:n.loginSource,giftCodeSKUId:n.giftCodeSKUId}),b.ComponentDispatch.dispatch(L.ComponentActions.WAVE_EMPHASIZE)},n.handleSMSTokenSubmit=function(e){var t=n.state.smsCode,r=n.props.mfaTicket;null!=e&&e.preventDefault(),l.default.loginSMS({code:t.replace(/ /g,""),ticket:r}),b.ComponentDispatch.dispatch(L.ComponentActions.WAVE_EMPHASIZE)},n.handleToggleSMSLogin=function(e){var t=n.props.mfaTicket;null!=e&&e.preventDefault(),l.default.requestSMSToken(t),b.ComponentDispatch.dispatch(L.ComponentActions.WAVE_EMPHASIZE)},n.handleForgotPassword=function(){var e=H(regeneratorRuntime.mark((function e(t){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=t&&t.preventDefault(),null!=n.loginRef&&n.loginRef.focus(),r=n.getFullLogin(),o=n.state.captchaKey,n.setState({captchaCallback:n.handleForgotPassword,captchaKey:null}),e.prev=5,b.ComponentDispatch.dispatch(L.ComponentActions.WAVE_EMPHASIZE),e.next=9,l.default.forgotPassword(r,o);case 9:(0,T.openModal)((function(e){return a.createElement(O.default,F({header:k.default.Messages.EMAIL_VERIFICATION_INSTRUCTIONS_HEADER,confirmText:k.default.Messages.OKAY,confirmButtonColor:I.Button.Colors.BRAND,className:R.isMobile?G.default.mobile:""},e),V(N.default,{size:N.default.Sizes.SIZE_16},void 0,k.default.Messages.EMAIL_VERIFICATION_INSTRUCTIONS_BODY.format({email:r})))})),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(5);case 14:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}(),n.handleResendCode=function(){p.default.resendCode(n.getFullLogin())},n.handleReset=function(e){null!=e&&e.preventDefault(),l.default.loginReset(),n.setState({password:"",loginPrefix:"",login:"",code:"",smsCode:"",captchaKey:null,undelete:!1,checkingHandoff:!1})},n.handleCancelAccountDeletion=function(){n.setState({undelete:!0},n.handleLogin)},n.handleCaptchaVerify=function(e){var t=n.state.captchaCallback;n.setState({captchaKey:e},t)},n.handleGotoRegister=function(){var e=n.state.login,t=n.props,r=t.invite,a=t.giftCode,o=t.closeLogin,u=t.openRegister,s=t.guildTemplate,f=t.location,c=t.transitionTo,d=t.redirectTo;if(t.isGuest)return void 0!==o&&o(),void(void 0!==u&&u());var p,v=null!=f?(0,i.parse)(f.search):{};""!==e&&(v.email=e),null!=r?(v.mode="register",p=L.Routes.INVITE(r.code)):null!=a?(v.mode="register",p=L.Routes.GIFT_CODE(a.code)):null!=s?p=L.Routes.GUILD_TEMPLATE(s.code):null!=d?(p=L.Routes.REGISTER,v.redirect_to=d):p=L.Routes.REGISTER,l.default.loginReset(),c(p,{search:(0,i.stringify)(v)}),b.ComponentDispatch.dispatch(L.ComponentActions.WAVE_EMPHASIZE)};var r=null!=t.location?(0,i.parse)(t.location.search):{};return n.state={redirecting:t.authenticated,checkingHandoff:t.handoffAvailable,loginPrefix:"",login:r.email||r.login||"",password:"",code:"",smsCode:"",captchaKey:null,captchaCallback:n.handleLogin,undelete:!1,phoneVerifyError:null},n}r=e,(t=u).prototype=Object.create(r.prototype),t.prototype.constructor=t,K(t,r),u.getDerivedStateFromProps=function(e){var t=e.handoffAvailable,n=e.authenticated;return t||n?null:{checkingHandoff:!1}};var v,_,E,j=u.prototype;return j.componentDidMount=function(){var e=this.props,t=e.handoffAvailable,n=e.authenticated,r=e.giftCodeSKU,a=e.invite,o=e.location;t&&!n?(0,s.handoffBegin)():n&&this.loginOrSSO(n,o,!0),S.default.track(L.AnalyticEvents.LOGIN_VIEWED,F({location:null!=a?"Invite Login Page":"Non-Invite Login Page",login_source:this.loginSource},null!=r?(0,c.default)(r,!1,!1):{}),{flush:!0}),l.default.getLocationMetadata(),(0,m.trackAppUIViewed)("login")},j.componentDidUpdate=function(e){var t,n=this.props,r=n.authenticated,a=n.location,o=this.state.checkingHandoff;if(!r||e.authenticated||o||this.loginOrSSO(r,a),e.errors!==this.props.errors)if(this.hasError("password"))null===(t=this.passwordRef)||void 0===t||t.focus();else if(this.hasError("email")||this.hasError("login")){var i;null===(i=this.loginRef)||void 0===i||i.focus()}else if(this.hasError("code")){var u;null===(u=this.codeRef)||void 0===u||u.focus()}},j.loginOrSSO=function(e,t,n){var r=this;void 0===n&&(n=!1);var a=this.props.isGuest;e&&(null!=t||a)&&(n?l.default.verifySSOToken().then((function(){return r.transitionSSO(t)})):this.transitionSSO(t))},j.transitionSSO=function(e){var t=this.props,n=t.transitionTo,r=t.redirectTo;if(t.isGuest&&null!=r)n(r);else{var a=null!=e?(0,i.parse)(e.search):{},o=(a.redirect_to,function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(a,["redirect_to"]));if(null!=r)n(r);else if(null==o.service)n(L.Routes.APP);else{var u=window.location.protocol+window.GLOBAL_ENV.API_ENDPOINT+L.Endpoints.SSO,l=F({},o,{token:g.default.getToken()});window.location=u+"?"+(0,i.stringify)(l)}}},j.hasError=function(e){return null!=this.props.errors[e]},j.renderHandOffAvailable=function(){var e=this.props.authBoxClassName;return V(I.default,{className:e},void 0,Y,V(I.Title,{className:B.default.marginBottom8},void 0,k.default.Messages.BROWSER_HANDOFF_DETECTING_TITLE),V(I.SubTitle,{},void 0,k.default.Messages.AUTH_BROWSER_HANDOFF_DETECTING_DESCRIPTION))},j.renderHandOffContinue=function(){var e=this.props,t=e.user,n=e.transitionTo,r=e.authBoxClassName;return null==t?null:V(I.default,{className:r},void 0,V(I.Avatar,{src:t.getAvatarURL(),size:I.Avatar.Sizes.DEPRECATED_SIZE_100,className:B.default.marginBottom20}),V(I.Title,{className:B.default.marginBottom8},void 0,k.default.Messages.BROWSER_HANDOFF_SUCCESS_TITLE.format({name:t.toString()})),V(I.SubTitle,{className:B.default.marginBottom40},void 0,k.default.Messages.BROWSER_HANDOFF_SUCCESS_BODY),V(I.Block,{},void 0,V(I.Button,{onClick:function(){return n(L.Routes.APP)},className:B.default.marginBottom8},void 0,k.default.Messages.BROWSER_HANDOFF_SUCCESS_ACTION.format({name:t.toString()})),V(I.Button,{look:I.Button.Looks.LINK,onClick:this.handleReset},void 0,k.default.Messages.BROWSER_HANDOFF_SUCCESS_CANCEL)))},j.renderDisabledAccount=function(){var e=this.props.authBoxClassName,t=this.props.loginStatus===L.LoginStates.ACCOUNT_DISABLED,n=t?k.default.Messages.ACCOUNT_DISABLED_TITLE:k.default.Messages.ACCOUNT_SCHEDULED_FOR_DELETION_TITLE,r=t?k.default.Messages.ACCOUNT_DISABLED_DESCRIPTION:k.default.Messages.ACCOUNT_SCHEDULED_FOR_DELETION_DESCRIPTION;return V(I.default,{tag:"form",onSubmit:this.handleReset,className:e},void 0,V(I.Title,{className:B.default.marginBottom8},void 0,n),V(I.SubTitle,{className:B.default.marginBottom20},void 0,r),V(I.Block,{},void 0,V(I.Button,{color:I.Button.Colors.BRAND,type:"submit"},void 0,k.default.Messages.RETURN_TO_LOGIN),V("div",{className:(0,o.default)(B.default.marginTop8,G.default.needAccount)},void 0,k.default.Messages.ACCOUNT_SCHEDULED_FOR_DELETION_CANCEL.format({onClick:this.handleCancelAccountDeletion}))))},j.renderResolving=function(){var e=this,t=this.props,n=t.authBoxClassName,r=t.country;return V(I.default,{className:n},void 0,$,V(I.Block,{className:B.default.marginTop20},void 0,V(h.default,{className:B.default.marginBottom20,alpha2:r.alpha2,countryCode:r.code.split(" ")[0],label:k.default.Messages.FORM_LABEL_EMAIL_OR_PHONE_NUMBER,onChange:function(t,n){return e.setState({login:t,loginPrefix:n})},setRef:this.setLoginRef,autoComplete:"off",spellCheck:"false",value:this.state.login,autoFocus:!0}),V(I.Input,{className:B.default.marginBottom20,label:k.default.Messages.FORM_LABEL_PASSWORD,onChange:function(t){return e.setState({password:t})},type:"password",setRef:this.setPasswordRef,autoComplete:"off",spellCheck:"false",value:this.state.password}),V(I.Button,{className:B.default.marginBottom8,type:"submit",disabled:!0},void 0,k.default.Messages.LOGIN),V(I.Button,{disabled:!0,look:I.Button.Looks.LINK},void 0,k.default.Messages.FORGOT_PASSWORD),V(I.Button,{disabled:!0,className:B.default.marginTop4,look:I.Button.Looks.LINK},void 0,k.default.Messages.NEED_ACCOUNT)))},j.renderDefaultForm=function(e){var t,n,r=this,i=this.props,u=i.invite,l=i.giftCode,s=i.loginStatus,f=i.isGuest,c=i.country,d=!this.hasError("email")&&this.hasError("password");return n=null!=u&&null!=u.channel?V(M.default,{invite:u}):null!=l?V(P.default,{giftCode:l}):f?null:V(a.Fragment,{},void 0,V(I.Title,{className:B.default.marginBottom8},"title",k.default.Messages.LOGIN_TITLE),V(I.SubTitle,{},"subtitle",k.default.Messages.AUTH_LOGIN_BODY)),V(y.default,{direction:y.default.Direction.HORIZONTAL,align:y.default.Align.CENTER},void 0,V("div",{className:G.default.mainLoginContainer},void 0,n,V(I.Block,{className:B.default.marginTop20},void 0,V(h.default,{alpha2:c.alpha2,countryCode:c.code.split(" ")[0],className:B.default.marginBottom20,label:k.default.Messages.FORM_LABEL_EMAIL_OR_PHONE_NUMBER,error:null!==(t=this.renderError("login"))&&void 0!==t?t:this.renderError("email"),onChange:function(e,t){return r.setState({login:e,loginPrefix:t})},setRef:this.setLoginRef,autoComplete:"off",spellCheck:"false",value:this.state.login,autoFocus:!d}),V(I.Input,{label:k.default.Messages.FORM_LABEL_PASSWORD,error:this.renderError("password"),onChange:function(e){return r.setState({password:e})},name:"password",type:"password",setRef:this.setPasswordRef,autoComplete:"off",spellCheck:"false",autoFocus:d,value:this.state.password}),V(I.Button,{onClick:this.handleForgotPassword,look:I.Button.Looks.LINK,className:(0,o.default)(B.default.marginBottom20,B.default.marginTop4)},void 0,k.default.Messages.FORGOT_PASSWORD),V(I.Button,{type:"submit",submitting:s===L.LoginStates.LOGGING_IN,className:B.default.marginBottom8},void 0,k.default.Messages.LOGIN),V("div",{className:B.default.marginTop4},void 0,V("span",{className:G.default.needAccount},void 0,k.default.Messages.NEED_ACCOUNT),V(I.Button,{onClick:this.handleGotoRegister,look:I.Button.Looks.LINK,className:G.default.smallRegisterLink},void 0,k.default.Messages.REGISTER)))),e?V(w.default,{authTokenCallback:this.handleAuthToken}):null)},j.renderDefault=function(){var e=this.props,t=e.authBoxClassName,n=e.isGuest;return V("div",{className:G.default.pageContainer},void 0,V(I.default,{onSubmit:this.handleLogin,tag:"form",className:t,expanded:!0},void 0,this.renderDefaultForm(!n)))},j.renderGuildTemplate=function(e){var t=this,n=V(d.default,{guildTemplate:e});return V(D.default,{onSubmit:this.handleLogin,tag:"form",className:(0,o.default)(this.props.authBoxClassName,G.default.horizontalAuthBox)},void 0,(function(){return[n,t.renderDefaultForm(!1)]}))},j.renderMFA=function(){var e=this,t=this.props,r=t.loginStatus,a=t.mfaSMS,o=t.authBoxClassName;return V(I.default,{onSubmit:this.handleTokenSubmit,tag:"form",className:o},void 0,V("img",{alt:"",src:n(5094),className:B.default.marginBottom20}),V(I.Title,{className:B.default.marginBottom8},void 0,k.default.Messages.TWO_FA),V(I.SubTitle,{},void 0,k.default.Messages.TWO_FA_ENTER_TOKEN_BODY),V(I.Block,{className:B.default.marginTop40},void 0,V(I.Input,{className:B.default.marginBottom20,error:this.renderError("code"),setRef:this.setCodeRef,onChange:function(t){return e.setState({code:t})},autoComplete:"off",placeholder:k.default.Messages.TWO_FA_AUTH_CODE,spellCheck:"false",maxLength:10,autoFocus:!0,label:k.default.Messages.TWO_FA_ENTER_TOKEN_LABEL,value:this.state.code},"totpCode"),V(I.Button,{type:"submit",submitting:r===L.LoginStates.LOGGING_IN_MFA},void 0,k.default.Messages.LOGIN),a?V(I.Button,{onClick:this.handleToggleSMSLogin,submitting:r===L.LoginStates.LOGGING_IN_MFA_SMS,className:B.default.marginTop8,look:I.Button.Looks.LINK},void 0,k.default.Messages.MFA_SMS_RECEIVE_CODE):null,V(I.Button,{look:I.Button.Looks.LINK,className:B.default.marginTop4,onClick:this.handleReset},void 0,k.default.Messages.TWO_FA_LOGIN_FOOTER)))},j.renderMFASMS=function(){var e=this,t=this.props,r=t.loginStatus,a=t.maskedPhone,o=t.authBoxClassName,i=r===L.LoginStates.LOGGING_IN_MFA_SMS||""===a;return V(I.default,{onSubmit:this.handleSMSTokenSubmit,tag:"form",className:o},void 0,V("img",{alt:"",src:n(5094),className:B.default.marginBottom20}),V(I.Title,{className:B.default.marginBottom8},void 0,k.default.Messages.TWO_FA),V(I.SubTitle,{className:B.default.marginBottom8},void 0,i?k.default.Messages.TWO_FA_ENTER_SMS_TOKEN_SENDING:k.default.Messages.TWO_FA_ENTER_SMS_TOKEN_SENT.format({phoneNumber:a})),V(I.Block,{className:B.default.marginTop40},void 0,V(I.Input,{className:B.default.marginBottom20,error:this.renderError("code"),setRef:this.setCodeRef,onChange:function(t){return e.setState({smsCode:t})},autoComplete:"off",placeholder:k.default.Messages.TWO_FA_AUTH_CODE,spellCheck:"false",maxLength:10,autoFocus:!0,label:k.default.Messages.TWO_FA_ENTER_SMS_TOKEN_LABEL,value:this.state.smsCode},"smsCode"),V(I.Button,{type:"submit",submitting:i,color:i?I.Button.Colors.TRANSPARENT:I.Button.Colors.BRAND},void 0,k.default.Messages.LOGIN),i?null:V(I.Button,{onClick:this.handleToggleSMSLogin,className:B.default.marginTop8,look:I.Button.Looks.LINK},void 0,k.default.Messages.MFA_SMS_RESEND),V(I.Button,{look:I.Button.Looks.LINK,className:B.default.marginTop4,onClick:this.handleReset},void 0,k.default.Messages.TWO_FA_LOGIN_FOOTER)))},j.renderIPAuthorization=function(){var e=this.props.authBoxClassName,t=this.state.phoneVerifyError;return V(I.default,{tag:"form",className:e},void 0,V(f.default,{title:k.default.Messages.PHONE_IP_AUTHORIZATION_TITLE,subtitle:k.default.Messages.PHONE_IP_AUTHORIZATION_SUBTITLE_RESEND.format({onResendClick:this.handleResendCode}),error:t,onSubmit:this.handleIPAuthorize,onCancel:l.default.loginReset}))},j.renderPasswordRecovery=function(){var e=this.props.authBoxClassName,t=this.state.phoneVerifyError;return V(I.default,{tag:"form",className:e},void 0,V(f.default,{title:k.default.Messages.PASSWORD_RECOVERY_VERIFY_PHONE_TITLE,subtitle:k.default.Messages.PASSWORD_RECOVERY_VERIFY_PHONE_SUBTITLE_RESEND.format({onResendClick:this.handleResendCode}),error:t,onSubmit:this.handlePasswordReset,onCancel:l.default.loginReset}))},j.render=function(){var e=this.props,t=e.authenticated,n=e.invite,r=e.guildTemplate,a=e.loginStatus,o=e.handoffAvailable,i=e.isGuest,u=e.authBoxClassName,l=e.errors,s=l.captcha_sitekey,f=l.captcha_service,c=this.state,d=c.checkingHandoff;if(c.redirecting)return null;if(this.hasError("captcha_key"))return V(C.default,{authBoxClassName:u,onVerify:this.handleCaptchaVerify,title:i?null:k.default.Messages.LOGIN_TITLE,sitekey:s,captchaService:(0,A.parseCaptchaType)(f)});if(o)return this.renderHandOffAvailable();if(t&&d)return this.renderHandOffContinue();switch(a){case L.LoginStates.LOGGING_IN_MFA_SMS:case L.LoginStates.MFA_SMS_STEP:return this.renderMFASMS();case L.LoginStates.LOGGING_IN_MFA:case L.LoginStates.MFA_STEP:return this.renderMFA();case L.LoginStates.ACCOUNT_SCHEDULED_FOR_DELETION:case L.LoginStates.ACCOUNT_DISABLED:return this.renderDisabledAccount();case L.LoginStates.PHONE_IP_AUTHORIZATION:return this.renderIPAuthorization();case L.LoginStates.PASSWORD_RECOVERY_PHONE_VERIFICATION:return this.renderPasswordRecovery();case L.LoginStates.LOGGING_IN:case L.LoginStates.NONE:default:return null!=n&&n.state===L.InviteStates.RESOLVING?this.renderResolving():null!=r?r.state===L.InviteStates.RESOLVING?this.renderResolving():this.renderGuildTemplate(r):this.renderDefault()}},v=u,(_=[{key:"loginSource",get:function(){var e=this.props,t=e.giftCode,n=e.guildTemplate,r=e.invite,a=e.isGuest;return null!=t?"gift":null!=n?"guild_template":null!=r?null!=r.guild?"guild_invite":"dm_invite":a?"guest_lurker":null}},{key:"giftCodeSKUId",get:function(){var e=this.props.giftCode;return null!=e?e.skuId:null}}])&&z(v.prototype,_),E&&z(v,E),u}(a.PureComponent);function q(e){var t=(0,u.useStateFromStoresObject)([_.default,E.default,g.default,v.default],(function(){return{authenticated:g.default.isAuthenticated(),handoffAvailable:_.default.isHandoffAvailable(),user:_.default.user,loginStatus:g.default.getLoginStatus(),mfaTicket:g.default.getMFATicket(),mfaSMS:g.default.getMFASMS(),maskedPhone:g.default.getMaskedPhone(),errors:g.default.getErrors(),defaultRoute:E.default.defaultRoute,country:v.default.getCountryCode()}}));return a.createElement(Z,F({},e,t))}Z.displayName="Login",Z.defaultProps={isGuest:!1,transitionTo:function(t){return e.location.assign(t)}},q.displayName="ConnectedLogin";var J=q;t.default=J}).call(this,n(36))},5107:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=V();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=n(5080),i=n(258),u=F(n(3)),l=F(n(2)),s=F(n(423)),f=F(n(5312)),c=F(n(1004)),d=F(n(10741)),p=n(10742),v=F(n(977)),h=F(n(8403)),m=F(n(10)),g=F(n(329)),_=F(n(7651)),E=F(n(975)),y=F(n(19)),I=n(367),O=n(985),T=F(n(173)),N=F(n(10752)),S=n(993),A=n(357),b=F(n(5496)),R=F(n(5497)),C=F(n(10753)),P=F(n(10756)),M=F(n(10758)),w=F(n(10759)),D=F(n(10760)),L=F(n(10761)),k=F(n(5098)),G=F(n(5507)),B=F(n(7865)),j=F(n(10762)),U=F(n(10763)),x=n(1);function F(e){return e&&e.__esModule?e:{default:e}}function V(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return V=function(){return e},e}function W(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n(8632),u.default.initialize();var K=(0,b.default)(k.default),Y=(0,b.default)(G.default),$=(0,b.default)(L.default),Z=(0,b.default)(w.default),q=(0,b.default)(M.default),J=(0,b.default)(p.AcceptInviteExperimentWrapper),Q=(0,b.default)(B.default),X=(0,b.default)(C.default),ee=(0,b.default)(U.default),te=(0,b.default)(j.default),ne=(0,b.default)(P.default),re=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={splash:null,redirectTo:null,backgroundId:null},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,z(t,n),r.getDerivedStateFromProps=function(e,t){var n=e.invite,r=e.location,a=t.backgroundId,i=(0,o.parse)(r.search).redirect_to||null;null!=i&&(0,S.isSafeRedirect)(i)&&!i.startsWith(x.Routes.ME)||(i=null);var u=null;if(null==n)u=(0,O.getArtForPath)(i);else if((null==n?void 0:n.state)===x.InviteStates.RESOLVED){var l=n.guild,s=n.target_application;null!=s?null!=a&&(u=(0,I.getAssetImage)(s.id,a,1024)):null!=l&&"string"==typeof l.splash&&(u=T.default.getGuildSplashURL({id:l.id,splash:l.splash}))}return{redirectTo:i,splash:u}};var u=r.prototype;return u.componentDidMount=function(){var e=this.props,t=e.inviteCode,n=e.hasLoadedExperiments,r=e.isAuthenticated,a=e.isGuestAuthenticated;null!=t&&(n||!r&&!a||s.default.getExperiments(),y.default.track(x.AnalyticEvents.INVITE_OPENED,{invite_code:t,load_time:N.default.getTimeSinceNavigationStart()},{flush:!0})),n&&this.resolveInvite(),this.resolveGiftCode(),this.resolveGuildTemplate(),d.default.initialize()},u.componentDidUpdate=function(e){var t,n;!e.hasLoadedExperiments&&this.props.hasLoadedExperiments&&this.resolveInvite(),(null===(t=e.invite)||void 0===t?void 0:t.state)!==(null===(n=this.props.invite)||void 0===n?void 0:n.state)&&this.maybeFetchApplicationSplash()},u.componentWillUnmount=function(){d.default.terminate()},u.maybeFetchApplicationSplash=function(){var e=this,t=this.props.invite;if((null==t?void 0:t.state)===x.InviteStates.RESOLVED){var n=t.target_application;null!=n&&(0,I.getAssetIds)(n.id,["embedded_splash"]).then((function(t){var n=t[0];return e.setState({backgroundId:n})}))}},u.resolveInvite=function(){var e=this.props.inviteCode;null!=e&&(c.default.resolveInvite(e,x.PageAnalyticsLocations.INVITE),c.default.openNativeAppModal(e))},u.resolveGuildTemplate=function(){var e=this.props.guildTemplateCode;null!=e&&(y.default.track(x.AnalyticEvents.GUILD_TEMPLATE_OPENED,{guild_template_code:e,load_time:N.default.getTimeSinceNavigationStart()},{flush:!0}),h.default.resolveGuildTemplate(e),h.default.openNativeAppModal(e))},u.resolveGiftCode=function(){var e=this.props.giftCode;null!=e&&(f.default.resolveGiftCode(e,!0,!0),l.default.wait((function(){return f.default.openNativeGiftCodeModal(e)})))},u.render=function(){var e=this.state,t=e.splash,n=e.redirectTo;return W(R.default,{splash:t,redirectTo:n},void 0,W(i.Route,{path:x.Routes.LOGIN_HANDOFF,render:function(e){return a.createElement(Y,H({},e,{redirectTo:n}))}}),W(i.Route,{path:x.Routes.LOGIN,render:function(e){return a.createElement(K,H({},e,{redirectTo:n}))}}),W(i.Route,{path:x.Routes.REGISTER,render:function(e){return a.createElement(Q,H({},e,{redirectTo:n}))}}),W(i.Route,{path:x.Routes.GIFT_CODE_LOGIN(":giftCode"),render:function(e){return a.createElement(q,H({login:!0},e))}}),W(i.Route,{path:x.Routes.GIFT_CODE(":giftCode"),render:function(e){return a.createElement(q,e)}}),W(i.Route,{path:[x.Routes.INVITE_LOGIN(":inviteCode"),x.Routes.INVITE(":inviteCode")],render:function(e){var t=e.match,n=t.params.inviteCode,r=t.path,a=e.location,o=e.transitionTo;return A.isMobile||A.isTablet?W(J,{inviteCode:n},n):W($,{inviteCode:n,location:a,transitionTo:o,login:r===x.Routes.INVITE_LOGIN(":inviteCode")})}}),W(i.Route,{path:[x.Routes.GUILD_TEMPLATE_LOGIN(":guildTemplateCode"),x.Routes.GUILD_TEMPLATE(":guildTemplateCode")],render:function(e){var t=e.match,n=t.params.guildTemplateCode,r=t.path,a=e.location,o=e.transitionTo;return A.isMobile||A.isTablet?W(D.default,{code:n},n):W(Z,{code:n,location:a,transitionTo:o,login:r===x.Routes.GUILD_TEMPLATE_LOGIN(":guildTemplateCode")})}}),W(i.Route,{path:x.Routes.VERIFY,render:function(e){return a.createElement(ee,e)}}),W(i.Route,{path:x.Routes.DISABLE_EMAIL_NOTIFICATIONS,render:function(e){return a.createElement(ne,e)}}),W(i.Route,{path:x.Routes.AUTHORIZE_IP,render:function(e){return a.createElement(X,e)}}),W(i.Route,{path:x.Routes.RESET,render:function(e){return a.createElement(te,e)}}))},r}(a.PureComponent);re.displayName="ViewsWithAuth";var ae=u.default.connectStores([m.default,E.default,_.default,g.default,v.default],(function(e){var t,n,r,a=e.match,o=null==a||null===(t=a.params)||void 0===t?void 0:t.inviteCode,i=null==a||null===(n=a.params)||void 0===n?void 0:n.giftCode,u=null==a||null===(r=a.params)||void 0===r?void 0:r.guildTemplateCode;return{inviteCode:o,isAuthenticated:m.default.isAuthenticated(),isGuestAuthenticated:m.default.isGuest(),giftCode:i,guildTemplateCode:u,gift:null!=i?_.default.get(i):null,invite:null!=o?E.default.getInvite(o):null,guildTemplate:null!=u?v.default.getGuildTemplate(u):null,hasLoadedExperiments:g.default.hasLoadedExperiments}}))(re);t.default=ae},5307:function(e,t,n){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}},5308:function(e,t,n){"use strict";var r=new RegExp("%[a-f0-9]{2}","gi"),a=new RegExp("(%[a-f0-9]{2})+","gi");function o(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],o(n),o(r))}function i(e){try{return decodeURIComponent(e)}catch(a){for(var t=e.match(r),n=1;n<t.length;n++)t=(e=o(t,n).join("")).match(r);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=a.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=i(n[0]);r!==n[0]&&(t[n[0]]=r)}n=a.exec(e)}t["%C2"]="�";for(var o=Object.keys(t),u=0;u<o.length;u++){var l=o[u];e=e.replace(new RegExp(l,"g"),t[l])}return e}(e)}}},5316:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.InviteResolvingHeader=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=E();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=n(430),i=_(n(327)),u=_(n(32)),l=_(n(227)),s=_(n(107)),f=_(n(424)),c=_(n(5170)),d=_(n(322)),p=n(419),v=_(n(61)),h=n(1),m=_(n(7)),g=_(n(5454));function _(e){return e&&e.__esModule?e:{default:e}}function E(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return E=function(){return e},e}function y(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var I=function(){return y(a.Fragment,{},void 0,y(p.Avatar,{src:null,size:p.Avatar.Sizes.DEPRECATED_SIZE_100,className:g.default.avatar}),y(p.SubTitle,{},void 0,m.default.Messages.INSTANT_INVITE_YOU_HAVE_BEEN_INVITED_TO_JOIN),y(p.Title,{className:g.default.inviteResolvingGuildName},void 0,m.default.Messages.LOADING))};t.InviteResolvingHeader=I,I.displayName="InviteResolvingHeader";var O=function(e){var t=e.guild,n=e.user,r=e.application;return r?y(f.default,{className:g.default.appIcon,game:r,size:g.default.appIconSize}):n?y(p.Avatar,{src:null!=n?n.getAvatarURL():null,size:p.Avatar.Sizes.DEPRECATED_SIZE_100,className:g.default.avatar}):t?y(p.GuildIcon,{guild:t,size:p.GuildIcon.Sizes.XLARGE,className:g.default.guildIcon,animate:!0}):null},T=function(e){var t=e.invite,n=e.disableUser,r=void 0!==n&&n,f=e.error,_=e.description,E=e.flatActivityCount,I=void 0!==E&&E;if(null==t)return null;var T,N,S,A=null!=t.guild?new l.default(t.guild):null,b=null!=t.channel?new u.default(t.channel):null,R=null!=t.target_application?new i.default(t.target_application):null,C=r||null==t.inviter?null:new s.default(t.inviter),P=!(null!=t.approximate_member_count&&t.approximate_member_count>100||null!=A&&A.hasFeature(h.GuildFeatures.COMMUNITY))&&C,M=null;if(null!=A)M=null==C?m.default.Messages.INSTANT_INVITE_YOU_HAVE_BEEN_INVITED_TO_JOIN:m.default.Messages.AUTH_MESSAGE_INVITED_BY.format({username:C.username}),t.target_type===o.InviteTargetTypes.STREAM&&null!=t.target_user&&(M=m.default.Messages.AUTH_MESSAGE_INVITED_TO_STREAM.format({username:t.target_user.username})),t.target_type===o.InviteTargetTypes.EMBEDDED_APPLICATION&&null!=t.target_application&&(M=null!=C?m.default.Messages.AUTH_MESSAGE_INVITED_TO_PLAY_USERNAME.format({username:C.username}):m.default.Messages.AUTH_MESSAGE_INVITED_TO_PLAY),P&&null==R&&(T=y(p.GuildIcon,{guild:A,size:p.GuildIcon.Sizes.SMALL})),N=A.name,null!=R&&(N=R.name,null==_&&(S=y("div",{},void 0,y(p.SubTitle,{className:g.default.appIn},void 0,m.default.Messages.EMBEDDED_ACTIVITIES_INVITE_IN),y("div",{className:g.default.guildContainer},void 0,y(p.GuildIcon,{guild:A,size:p.GuildIcon.Sizes.SMALL}),y(v.default,{className:g.default.appGuildName,color:v.default.Colors.CUSTOM,tag:"span",size:v.default.Sizes.SIZE_24},void 0,A.name)))));else if(null!=b){if(null==C)throw new Error("no inviter in group DM invite");var w=C.username;b.name?(M=m.default.Messages.AUTH_MESSAGE_INVITED_BY.format({username:w}),N=b.name,null!=b.icon&&(T=y(p.ChannelIcon,{channel:b,size:p.Avatar.Sizes.SIZE_32}))):(M=m.default.Messages.INSTANT_INVITE_YOU_HAVE_BEEN_INVITED_TO_JOIN_GROUP_DM,N=w)}return y("div",{},void 0,y(O,{application:R,guild:A,user:P?C:null}),f?a.createElement(a.Fragment,null,y(p.SubTitle,{},void 0,m.default.Messages.INVITE_MODAL_ERROR_TITLE),y(p.Title,{},void 0,f)):a.createElement(a.Fragment,null,y(p.SubTitle,{},void 0,M),y(p.Title,{className:g.default.title},void 0,null!=A?y(c.default,{guild:A,className:g.default.guildBadge,tooltipPosition:d.default.Positions.LEFT}):null,T,N)),_&&y("p",{className:g.default.description},void 0,_),S,null==R?y(p.ActivityCount,{className:g.default.activityCount,online:t.approximate_presence_count,total:t.approximate_member_count,flat:I}):null)};T.displayName="InviteHeader";var N=T;t.default=N},5333:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.GiftCodeResolvingHeader=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=E();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=_(n(8)),i=_(n(3)),u=_(n(52)),l=_(n(14)),s=_(n(246)),f=_(n(323)),c=_(n(424)),d=n(419),p=n(1),v=_(n(7)),h=_(n(5453)),m=_(n(972)),g=_(n(408));function _(e){return e&&e.__esModule?e:{default:e}}function E(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return E=function(){return e},e}function y(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var I=function(){return y(a.Fragment,{},void 0,y(d.Avatar,{src:null,size:d.Avatar.Sizes.DEPRECATED_SIZE_100,className:g.default.marginBottom20}),y(d.SubTitle,{},void 0,v.default.Messages.GIFT_CODE_AUTH_GIFTED),y(d.Title,{className:(0,o.default)(g.default.marginTop8,m.default.flexCenter)},void 0,v.default.Messages.LOADING))};t.GiftCodeResolvingHeader=I,I.displayName="GiftCodeResolvingHeader";var O=function(e){var t=e.error,n=e.gifter,r=e.sku,i=e.application,u=e.subscriptionPlan,l=null==n?v.default.Messages.GIFT_CODE_AUTH_GIFTED:v.default.Messages.GIFT_CODE_AUTH_GIFTED_BY.format({username:n.username}),s=r.name;return null!=u&&(s=(u.interval===p.SubscriptionIntervalTypes.MONTH?v.default.Messages.GIFT_CODE_AUTH_GIFTED_SUBSCRIPTION_MONTHLY:v.default.Messages.GIFT_CODE_AUTH_GIFTED_SUBSCRIPTION_YEARLY).format({skuName:r.name,intervalCount:u.intervalCount})),y(a.Fragment,{},void 0,y(d.Avatar,{src:null!=n?n.getAvatarURL():null,size:d.Avatar.Sizes.DEPRECATED_SIZE_100,className:g.default.marginBottom20}),null!=t?y(a.Fragment,{},void 0,y(d.SubTitle,{},void 0,v.default.Messages.INVITE_MODAL_ERROR_TITLE),y(d.Title,{},void 0,t)):y(a.Fragment,{},void 0,y(d.SubTitle,{},void 0,l),y(d.Title,{className:(0,o.default)(g.default.marginTop8,m.default.flexCenter)},void 0,y(c.default,{size:c.default.Sizes.MEDIUM,className:h.default.applicationIcon,game:i,skuId:r.id}),s)))};O.displayName="GiftCodeHeader";var T=i.default.connectStores([f.default,u.default,s.default,l.default],(function(e){var t=e.giftCode,n=f.default.get(t.skuId),r=t.subscriptionPlanId;return{sku:n,subscriptionPlan:null!=r?s.default.get(r):null,application:u.default.getGame(n.applicationId),gifter:l.default.getUser(t.userId)}}))(O);t.default=T},5334:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sizes=t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=(r=n(5077))&&r.__esModule?r:{default:r},i=n(173);function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){return((0,i.hasAnimatedAvatar)(e)&&t?e.getAvatarURL("gif"):e.avatarURL||e.getAvatarURL("jpg"))||""}var f=a.memo((function(e){var t=e.user,n=e.size,r=void 0===n?o.default.Sizes.SIZE_32:n,i=e.animate,u=void 0!==i&&i,f=e["aria-hidden"],c=void 0!==f&&f,d=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["user","size","animate","aria-hidden"]);return a.createElement(o.default,l({src:s(t,u),size:r,"aria-label":c?void 0:t.username,"aria-hidden":c},d))}));t.default=f;var c=o.default.Sizes;t.Sizes=c},5335:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=l(n(8)),i=l(n(419)),u=l(n(5457));function l(e){return e&&e.__esModule?e:{default:e}}function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function d(e){var t=e.children,n=e.className,r=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["children","className"]),l=t();return a.createElement(i.default,f({},r,{className:(0,o.default)(n,u.default.container),contentClassName:u.default.content}),l.map((function(e,t){return c("div",{className:u.default.column,style:{flexBasis:100/l.length+"%"}},t,e)})))}d.displayName="MultiColumnAuthBox"},5343:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;p(n(0));var r,a=n(101),o=c(n(5344)),i=p(n(419)),u=n(1),l=c(n(7)),s=c(n(972)),f=c(n(408));function c(e){return e&&e.__esModule?e:{default:e}}function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function v(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var h=function(e){var t=e.title,r=e.onVerify,c=e.authBoxClassName,d=e.captchaService,p=void 0===d?u.CaptchaTypes.RECAPTCHA:d,h=e.sitekey;return v(i.default,{className:c},void 0,v("img",{alt:"",src:n(5094),className:f.default.marginBottom20}),null!=t?v(i.Title,{className:f.default.marginBottom8},void 0,t):null,v(i.SubTitle,{className:f.default.marginBottom40},void 0,l.default.Messages.BEEP_BOOP),v("div",{className:s.default.flexCenter},void 0,v(o.default,{onVerify:r,theme:a.ThemeTypes.DARK,captchaService:p,sitekey:h})))};h.displayName="AuthCaptcha";var m=h;t.default=m},5366:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(0)),a=i(n(5431));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){var t,n;function o(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).QRRef=r.createRef(),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,u(t,n);var i=o.prototype;return i.componentDidMount=function(){new a.default(this.QRRef.current,this.props)},i.componentDidUpdate=function(){new a.default(this.QRRef.current,this.props)},i.render=function(){var e=this.props,t=e.colorLight,n=e.className;return r.createElement("div",{ref:this.QRRef,style:{padding:8,borderRadius:4,background:t},className:n})},o}(r.PureComponent);l.displayName="QRCode",l.defaultProps={width:128,height:128,colorLight:"#ffffff",colorDark:"#000000",correctLevel:a.CorrectLevel.M};var s=l;t.default=s},5371:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=h;!function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n)}(n(0));var r,a=d(n(41)),o=d(n(5338)),i=d(n(60)),u=n(419),l=d(n(61)),s=d(n(7)),f=d(n(5444)),c=d(n(408));function d(e){return e&&e.__esModule?e:{default:e}}function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function v(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function h(e){var t=e.title,n=e.subtitle,r=e.error,d=e.onSubmit,p=e.onCancel;return v(i.default,{direction:i.default.Direction.VERTICAL},void 0,v(u.Title,{className:c.default.marginBottom8},void 0,t),v(u.SubTitle,{className:f.default.subTitle},void 0,n),v("div",{},void 0,v(o.default,{inputClassName:f.default.codeInput,onSubmit:d}),null!=r?v(l.default,{className:f.default.error},void 0,r):null),v(a.default,{className:f.default.button,onClick:p,color:a.default.Colors.GREY},void 0,s.default.Messages.CANCEL))}h.displayName="PhoneVerify"},5373:function(e,t,n){"use strict";var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},o="function"==typeof Object.getOwnPropertySymbols;e.exports=function(e,t,n){if("string"!=typeof t){var i=Object.getOwnPropertyNames(t);o&&(i=i.concat(Object.getOwnPropertySymbols(t)));for(var u=0;u<i.length;++u)if(!(r[i[u]]||a[i[u]]||n&&n[i[u]]))try{e[i[u]]=t[i[u]]}catch(e){}}return e}},5374:function(e,t){if(!n)var n={map:function(e,t){var n={};return t?e.map((function(e,r){return n.index=r,t.call(n,e)})):e.slice()},naturalOrder:function(e,t){return e<t?-1:e>t?1:0},sum:function(e,t){var n={};return e.reduce(t?function(e,r,a){return n.index=a,e+t.call(n,r)}:function(e,t){return e+t},0)},max:function(e,t){return Math.max.apply(null,t?n.map(e,t):e)}};var r=function(){function e(e,t,n){return(e<<10)+(t<<5)+n}function t(e){var t=[],n=!1;function r(){t.sort(e),n=!0}return{push:function(e){t.push(e),n=!1},peek:function(e){return n||r(),void 0===e&&(e=t.length-1),t[e]},pop:function(){return n||r(),t.pop()},size:function(){return t.length},map:function(e){return t.map(e)},debug:function(){return n||r(),t}}}function r(e,t,n,r,a,o,i){this.r1=e,this.r2=t,this.g1=n,this.g2=r,this.b1=a,this.b2=o,this.histo=i}function a(){this.vboxes=new t((function(e,t){return n.naturalOrder(e.vbox.count()*e.vbox.volume(),t.vbox.count()*t.vbox.volume())}))}function o(t,r){if(r.count()){var a=r.r2-r.r1+1,o=r.g2-r.g1+1,i=r.b2-r.b1+1,u=n.max([a,o,i]);if(1==r.count())return[r.copy()];var l,s,f,c,d=0,p=[],v=[];if(u==a)for(l=r.r1;l<=r.r2;l++){for(c=0,s=r.g1;s<=r.g2;s++)for(f=r.b1;f<=r.b2;f++)c+=t[e(l,s,f)]||0;d+=c,p[l]=d}else if(u==o)for(l=r.g1;l<=r.g2;l++){for(c=0,s=r.r1;s<=r.r2;s++)for(f=r.b1;f<=r.b2;f++)c+=t[e(s,l,f)]||0;d+=c,p[l]=d}else for(l=r.b1;l<=r.b2;l++){for(c=0,s=r.r1;s<=r.r2;s++)for(f=r.g1;f<=r.g2;f++)c+=t[e(s,f,l)]||0;d+=c,p[l]=d}return p.forEach((function(e,t){v[t]=d-e})),h(u==a?"r":u==o?"g":"b")}function h(e){var t,n,a,o,i,u=e+"1",s=e+"2",f=0;for(l=r[u];l<=r[s];l++)if(p[l]>d/2){for(a=r.copy(),o=r.copy(),i=(t=l-r[u])<=(n=r[s]-l)?Math.min(r[s]-1,~~(l+n/2)):Math.max(r[u],~~(l-1-t/2));!p[i];)i++;for(f=v[i];!f&&p[i-1];)f=v[--i];return a[s]=i,o[u]=a[s]+1,[a,o]}}}return r.prototype={volume:function(e){return this._volume&&!e||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},count:function(t){var n=this.histo;if(!this._count_set||t){var r,a,o,i=0;for(r=this.r1;r<=this.r2;r++)for(a=this.g1;a<=this.g2;a++)for(o=this.b1;o<=this.b2;o++)i+=n[e(r,a,o)]||0;this._count=i,this._count_set=!0}return this._count},copy:function(){return new r(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},avg:function(t){var n=this.histo;if(!this._avg||t){var r,a,o,i,u=0,l=0,s=0,f=0;for(a=this.r1;a<=this.r2;a++)for(o=this.g1;o<=this.g2;o++)for(i=this.b1;i<=this.b2;i++)u+=r=n[e(a,o,i)]||0,l+=r*(a+.5)*8,s+=r*(o+.5)*8,f+=r*(i+.5)*8;this._avg=u?[~~(l/u),~~(s/u),~~(f/u)]:[~~(8*(this.r1+this.r2+1)/2),~~(8*(this.g1+this.g2+1)/2),~~(8*(this.b1+this.b2+1)/2)]}return this._avg},contains:function(e){var t=e[0]>>3;return gval=e[1]>>3,bval=e[2]>>3,t>=this.r1&&t<=this.r2&&gval>=this.g1&&gval<=this.g2&&bval>=this.b1&&bval<=this.b2}},a.prototype={push:function(e){this.vboxes.push({vbox:e,color:e.avg()})},palette:function(){return this.vboxes.map((function(e){return e.color}))},size:function(){return this.vboxes.size()},map:function(e){for(var t=this.vboxes,n=0;n<t.size();n++)if(t.peek(n).vbox.contains(e))return t.peek(n).color;return this.nearest(e)},nearest:function(e){for(var t,n,r,a=this.vboxes,o=0;o<a.size();o++)((n=Math.sqrt(Math.pow(e[0]-a.peek(o).color[0],2)+Math.pow(e[1]-a.peek(o).color[1],2)+Math.pow(e[2]-a.peek(o).color[2],2)))<t||void 0===t)&&(t=n,r=a.peek(o).color);return r},forcebw:function(){var e=this.vboxes;e.sort((function(e,t){return n.naturalOrder(n.sum(e.color),n.sum(t.color))}));var t=e[0].color;t[0]<5&&t[1]<5&&t[2]<5&&(e[0].color=[0,0,0]);var r=e.length-1,a=e[r].color;a[0]>251&&a[1]>251&&a[2]>251&&(e[r].color=[255,255,255])}},{quantize:function(i,u){if(!i.length||u<2||u>256)return!1;var l=function(t){var n,r,a,o,i=new Array(32768);return t.forEach((function(t){r=t[0]>>3,a=t[1]>>3,o=t[2]>>3,n=e(r,a,o),i[n]=(i[n]||0)+1})),i}(i);l.forEach((function(){0}));var s=function(e,t){var n,a,o,i=1e6,u=0,l=1e6,s=0,f=1e6,c=0;return e.forEach((function(e){n=e[0]>>3,a=e[1]>>3,o=e[2]>>3,n<i?i=n:n>u&&(u=n),a<l?l=a:a>s&&(s=a),o<f?f=o:o>c&&(c=o)})),new r(i,u,l,s,f,c,t)}(i,l),f=new t((function(e,t){return n.naturalOrder(e.count(),t.count())}));function c(e,t){for(var n,r=1,a=0;a<1e3;)if((n=e.pop()).count()){var i=o(l,n),u=i[0],s=i[1];if(!u)return;if(e.push(u),s&&(e.push(s),r++),r>=t)return;if(a++>1e3)return}else e.push(n),a++}f.push(s),c(f,.75*u);for(var d=new t((function(e,t){return n.naturalOrder(e.count()*e.volume(),t.count()*t.volume())}));f.size();)d.push(f.pop());c(d,u-d.size());for(var p=new a;d.size();)p.push(d.pop());return p}}}();e.exports=r.quantize},5392:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=u(n(3)),o=u(n(2)),i=n(5192);n(1);function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=(0,i.getDefaultCountryCode)();function f(e){var t,n=e.countryCode;null!=n&&(s=null!==(t=(0,i.getCountryCodeByAlpha2)(n))&&void 0!==t?t:(0,i.getDefaultCountryCode)())}var c=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n);var o=a.prototype;return o.initialize=function(e){null!=e&&(r=e.selectedCountryCode)},o.getState=function(){return{selectedCountryCode:r}},o.getCountryCode=function(){return null!=r?r:s},a}(a.default.PersistedStore);c.persistKey="PhoneStore";var d=new c(o.default,{PHONE_SET_COUNTRY_CODE:function(e){var t=e.countryCode;r=t},CONNECTION_OPEN:f,SET_LOCATION_METADATA:f});t.default=d},5393:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=h;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=d(n(8)),i=d(n(193)),u=n(136),l=n(5394),s=d(n(5395)),f=d(n(5452)),c=d(n(5066));function d(e){return e&&e.__esModule?e:{default:e}}function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function v(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function h(e){var t,n=e.alpha2,r=e.countryCode,d=e.forceMode,p=e.label,h=e.error,m=e.className,g=e.required,_=e.value,E=e.setRef,y=e.placeholder,I=e.autoFocus,O=e.maxLength,T=e.spellCheck,N=e.autoComplete,S=e.onChange,A=e.inputClassName,b=a.useState(!1),R=b[0],C=b[1],P=(0,l.shouldShowCountryCodeSelector)(d,_);return v(u.FormItem,{title:p,error:h,className:m,required:g},void 0,v("div",{className:(0,o.default)(c.default.input,f.default.input,A,(t={},t[c.default.error]=null!=h,t[c.default.focused]=R,t))},void 0,v(s.default,{show:P,alpha2:n,countryCode:r}),v(i.default,{name:"email",type:d===l.PhoneOrEmailSelectorForceMode.EMAIL?"email":"text",value:_,inputRef:E,placeholder:y,"aria-label":p,onChange:function(e){var t=(0,l.shouldShowCountryCodeSelector)(d,e)?r:"";S(e,t)},autoComplete:N,autoFocus:I,maxLength:O,spellCheck:T,className:f.default.inputWrapper,inputClassName:f.default.inputField,onFocus:function(){return C(!0)},onBlur:function(){return C(!1)}})))}h.displayName="PhoneOrEmailInput"},5394:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.shouldShowCountryCodeSelector=function(e,t){if(e===r.PHONE)return!0;if(e===r.EMAIL)return!1;if(t.length<3)return!1;return a.test(t)},t.PhoneOrEmailSelectorForceMode=void 0,t.PhoneOrEmailSelectorForceMode=r,function(e){e[e.PHONE=0]="PHONE",e[e.EMAIL=1]="EMAIL"}(r||(t.PhoneOrEmailSelectorForceMode=r={}));var a=/^[-() \d]+$/},5395:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=E;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=m();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=h(n(8)),i=n(181),u=n(3),l=h(n(5087)),s=h(n(98)),f=h(n(97)),c=h(n(961)),d=h(n(5184)),p=h(n(5341)),v=h(n(5451));function h(e){return e&&e.__esModule?e:{default:e}}function m(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return m=function(){return e},e}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function E(e){var t=e.show,n=e.alpha2,r=e.countryCode,h=(0,u.useStateFromStores)([s.default],(function(){return s.default.useReducedMotion})),m=a.useRef(null),E=a.useState(0),y=E[0],I=E[1],O=a.useState(!1),T=O[0],N=O[1];a.useEffect((function(){function e(){var e,n;I(t&&null!==(e=null===(n=m.current)||void 0===n?void 0:n.getBoundingClientRect().width)&&void 0!==e?e:0)}return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[t,n,r]);var S=(0,i.useSpring)({width:y+"px",immediate:h,onStart:function(){N(!0)},onRest:function(){N(!1)}});return _(c.default,{position:c.default.Positions.TOP,renderPopout:function(e){return _(p.default,{className:v.default.popout,onClick:function(t){return function(e,t){d.default.setCountryCode(l.default[e]),t()}(t,e.closePopout)}})}},void 0,(function(e){var u;return _("div",{className:(0,o.default)(v.default.outerContainer,(u={},u[v.default.hidden]=!(t||T),u))},void 0,_(i.animated.div,{className:v.default.container,style:S},void 0,a.createElement("div",{className:v.default.innerContainer,ref:m},a.createElement(f.default,g({},e,{className:v.default.countryCode}),n," ",r),_("div",{className:v.default.separator}))))}))}E.displayName="CountrySelector"},5399:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e){var t=i.useState(0),n=t[0],r=t[1],o=i.useState(!1),l=o[0],s=o[1],f=i.useState({step:a.INITIALIZING}),d=f[0],p=f[1],v=(0,c.default)(),h=i.useMemo((function(){return new u.default(1500,3e4)}),[]),m=i.useRef();m.current=i.useCallback((function(){p({step:a.INITIALIZING}),v?r((function(e){return e+1})):(P.info("document is not visible, will defer reconnection when document becomes visible."),s(!0))}),[p,r,v,s]);var g=i.useCallback((function(){!function(e){var t=e.current;if(void 0===t)throw new Error("tried to unwrap an undefined value.");return t}(m)()}),[m]);return i.useEffect((function(){v&&l&&d.step===a.INITIALIZING&&(P.info("reconnecting, now that document is visible"),s(!1),r((function(e){return e+1})))}),[d,v,l,s]),i.useEffect((function(){var t=Date.now(),n="wss:"+window.GLOBAL_ENV.REMOTE_AUTH_ENDPOINT+"/?v=1",r=new WebSocket(n);P.info("[0ms] connecting to "+n);var o=function(e){return P.info("["+(Date.now()-t)+"ms] "+e)},i=null,u=null,l=null,s=null,f=!0;function c(){if(null!=i)return i;throw new Error("No key pair set")}var d=function(){p({step:a.INITIALIZING}),h.pending||h.fail(g)},v=function(){f?(f=!1,r.send(JSON.stringify({op:"heartbeat"}))):(o("heartbeat timeout, reconnecting."),r.close(),d())};r.onmessage=function(){var t=R(regeneratorRuntime.mark((function t(n){var i,u,d,m,I,O,T,N,S,A;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=n.data,u=JSON.parse(i),t.t0=u.op,t.next="nonce_proof"===t.t0?5:"pending_remote_init"===t.t0?12:"pending_finish"===t.t0?22:"finish"===t.t0?30:"cancel"===t.t0?39:"hello"===t.t0?42:"heartbeat_ack"===t.t0?46:47;break;case 5:return d=u.encrypted_nonce,t.next=8,(0,E.computeNonceProof)(c(),d);case 8:return m=t.sent,o("computed nonce proof"),r.send(JSON.stringify({op:"nonce_proof",proof:m})),t.abrupt("return");case 12:return h.succeed(),_.ComponentDispatch.dispatch(y.ComponentActions.WAVE_EMPHASIZE),t.next=16,(0,E.publicKeyFingerprint)(c());case 16:if((I=t.sent)===u.fingerprint){t.next=19;break}throw new Error("bad fingerprint "+I+" !== "+u.fingerprint);case 19:return o("handshake complete awaiting remote auth."),p({step:a.PENDING_REMOTE_INIT,fingerprint:I}),t.abrupt("return");case 22:return _.ComponentDispatch.dispatch(y.ComponentActions.WAVE_EMPHASIZE),o("remote auth handshake started, awaiting finish/cancel."),O=u.encrypted_user_payload,t.next=27,(0,E.decodeEncodedUserRecord)(c(),O);case 27:return T=t.sent,p({step:a.PENDING_FINISH,user:T}),t.abrupt("return");case 30:return _.ComponentDispatch.dispatch(y.ComponentActions.WAVE_EMPHASIZE),o("remote auth handshake finished."),N=u.encrypted_token,p({step:a.FINISH}),t.next=36,(0,E.decryptEncodedCiphertext)(c(),N);case 36:return S=t.sent,e(S),t.abrupt("return");case 39:return o("remote auth handshake cancelled."),g(),t.abrupt("return");case 42:return o("got hello, auth timeout="+u.timeout_ms+"ms"),A=u.heartbeat_interval,s=setTimeout((function(){s=null,v(),l=setInterval(v,A)}),Math.floor(A*Math.random())),t.abrupt("return");case 46:f=!0;case 47:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.onopen=R(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.generateRsaKeyPair)();case 2:return i=e.sent,e.next=5,(0,E.serializePublicKey)(i);case 5:return u=e.sent,e.next=8,(0,E.publicKeyFingerprint)(i);case 8:t=e.sent,o("connected, handshaking with fingerprint: "+t),r.send(JSON.stringify({op:"init",encoded_public_key:u}));case 11:case"end":return e.stop()}}),e)}))),r.onclose=function(e){o("disconnected, code: "+e.code+" "+e.reason),d()},r.onerror=function(e){o("disconnected, error: "+e),d()};return function(){o("cleaning up"),r.onopen=function(){return null},r.onmessage=function(){return null},r.onclose=function(){return null},r.onerror=function(){return null},r.close(1e3),h.cancel(),null!=s&&clearTimeout(s),null!=l&&clearInterval(l)}}),[g,e,h,n]),{state:d,cancel:g}}(e.authTokenCallback),n=t.state,r=t.cancel,l=function(e){switch(e){case a.INITIALIZING:case a.PENDING_REMOTE_INIT:return o.QR_CODE;case a.PENDING_FINISH:case a.FINISH:return o.CONFIRM}}(n.step);return i.createElement(i.Fragment,null,A("div",{className:O.default.verticalSeparator}),A(p.default,{fillParent:!0,className:O.default.qrLogin,step:l,steps:[o.QR_CODE,o.CONFIRM]},void 0,A("div",{className:O.default.qrLoginInner},void 0,A(D,{state:n,cancel:r}))))};var r,a,o,i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=S();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),u=N(n(123)),l=n(101),s=N(n(5366)),f=N(n(5334)),c=N(n(5400)),d=N(n(22)),p=N(n(5061)),v=N(n(41)),h=N(n(225)),m=n(419),g=N(n(5077)),_=n(114),E=n(5401),y=n(1),I=N(n(7)),O=N(n(5456)),T=N(n(408));function N(e){return e&&e.__esModule?e:{default:e}}function S(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return S=function(){return e},e}function A(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function b(e,t,n,r,a,o,i){try{var u=e[o](i),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,a)}function R(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){b(o,r,a,i,u,"next",e)}function u(e){b(o,r,a,i,u,"throw",e)}i(void 0)}))}}!function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.PENDING_REMOTE_INIT=1]="PENDING_REMOTE_INIT",e[e.PENDING_FINISH=2]="PENDING_FINISH",e[e.FINISH=3]="FINISH"}(a||(a={})),function(e){e[e.QR_CODE=0]="QR_CODE",e[e.CONFIRM=1]="CONFIRM"}(o||(o={}));var C=n(5402),P=new d.default("LoginQRSocket");var M=A("img",{src:C,alt:""});function w(e){var t=e.text,n=void 0===t?"":t,r=i.useState(!1),a=r[0],o=r[1];return i.useEffect((function(){var e=new Image;e.src=C,e.onload=function(){return o(!0)},e.onerror=function(){return o(!0)}}),[]),A("div",{className:O.default.qrCodeContainer},void 0,""!==n&&a?i.createElement(i.Fragment,null,A(s.default,{className:O.default.qrCode,width:160,height:160,text:n}),A("div",{className:O.default.qrCodeOverlay},void 0,M)):A("div",{className:O.default.qrCodeOverlay},void 0,A(h.default,{className:O.default.qrCode,type:h.default.Type.WANDERING_CUBES})))}function D(e){var t=e.state,n=e.cancel;switch(t.step){case a.INITIALIZING:case a.PENDING_REMOTE_INIT:return i.createElement(i.Fragment,null,A(w,{text:t.step===a.PENDING_REMOTE_INIT?"https://discord.com/ra/"+t.fingerprint:""}),A(m.Title,{className:T.default.marginBottom8},void 0,I.default.Messages.LOGIN_WITH_QR),A(m.SubTitle,{},void 0,I.default.Messages.LOGIN_WITH_QR_DESCRIPTION.format()));case a.PENDING_FINISH:var r=t.user;return i.createElement(i.Fragment,null,A(f.default,{className:O.default.qrAvatar,user:r,size:g.default.Sizes.SIZE_120,isMobile:!0,status:l.StatusTypes.ONLINE}),A(m.Title,{className:T.default.marginBottom8},void 0,I.default.Messages.CONFIRM_QR_CHECK_YOUR_PHONE),A(m.SubTitle,{},void 0,I.default.Messages.LOGIN_AS.format({username:r.username+"#"+r.discriminator})),A(v.default,{look:v.default.Looks.BLANK,size:v.default.Sizes.MIN,onClick:n,className:O.default.startOverButton},void 0,I.default.Messages.QR_CODE_LOGIN_START_OVER));case a.FINISH:return A(h.default,{type:h.default.Type.WANDERING_CUBES})}}w.displayName="QrCodeWithOverlay"},5400:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,r.useState)(a()),t=e[0],n=e[1];return(0,r.useEffect)((function(){function e(){n(a())}return window.addEventListener("visibilitychange",e),function(){window.removeEventListener("visibilitychange",e)}}),[n]),t};var r=n(0);function a(){return"undefined"==typeof document||"visible"===document.visibilityState}},5401:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateRsaKeyPair=function(){return window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["decrypt"])},t.serializePublicKey=function(e){return u.apply(this,arguments)},t.publicKeyFingerprint=function(e){return l.apply(this,arguments)},t.sha256Digest=s,t.decryptEncodedCiphertext=p,t.computeNonceProof=function(e,t){return h.apply(this,arguments)},t.decodeEncodedUserRecord=function(e,t){return m.apply(this,arguments)};var r,a=(r=n(107))&&r.__esModule?r:{default:r};function o(e,t,n,r,a,o,i){try{var u=e[o](i),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function u(e){o(i,r,a,u,l,"next",e)}function l(e){o(i,r,a,u,l,"throw",e)}u(void 0)}))}}function u(){return(u=i(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.exportKey("spki",t.publicKey);case 2:return n=e.sent,e.abrupt("return",btoa(String.fromCharCode.apply(String,new Uint8Array(n))));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=i(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.exportKey("spki",t.publicKey);case 2:return n=e.sent,e.abrupt("return",s(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(e){return f.apply(this,arguments)}function f(){return(f=i(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.digest("SHA-256",t);case 2:return n=e.sent,e.abrupt("return",btoa(String.fromCharCode.apply(String,new Uint8Array(n))).replace(/\//g,"_").replace(/\+/g,"-").replace(/={1,2}$/,""));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e){return Uint8Array.from(atob(e),(function(e){return e.charCodeAt(0)}))}function d(e,t){return window.crypto.subtle.decrypt({name:"RSA-OAEP"},e.privateKey,t)}function p(e,t){return v.apply(this,arguments)}function v(){return(v=i(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new TextDecoder,e.next=3,d(t,c(n));case 3:return a=e.sent,e.abrupt("return",r.decode(a));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=i(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(t,c(n));case 2:return r=e.sent,e.abrupt("return",s(r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=i(regeneratorRuntime.mark((function e(t,n){var r,o,i,u,l,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(t,n);case 2:if(n=e.sent,r=/^(\d+):(\d{4}):([a-zA-Z0-9_]+):(.*)$/,null!=(o=n.match(r))){e.next=7;break}throw new Error("Invalid encoded user record.");case 7:return i=o[1],u=o[2],l=o[3],s=o[4],e.abrupt("return",new a.default({id:i,discriminator:u,avatar:"0"===l?null:l,username:s}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},5402:function(e,t,n){e.exports=n.p+"36d4b341723daffd4a372e1b19591da1.png"},5496:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=d(n(645)),i=d(n(230)),u=n(140),l=n(166),s=n(357),f=d(n(5521)),c=d(n(5069));function d(e){return e&&e.__esModule?e:{default:e}}function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function v(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=(0,l.cssValueToNumber)(c.default.responsiveWidthMobile),_=0,E=1,y={friction:10,tension:130};var I=function(e){return function(t){var n,r;function l(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).anim=new i.default.Value(_),e.state={shouldAnimate:!s.isMobile},e.handleResize=function(){var t=window.innerWidth>g;!e.state.shouldAnimate&&t&&e.anim.setValue(E),e.setState({shouldAnimate:t})},e.handleResizeDebounced=(0,o.default)(e.handleResize,60),e}r=t,(n=l).prototype=Object.create(r.prototype),n.prototype.constructor=n,m(n,r);var c=l.prototype;return c.componentDidMount=function(){s.isMobile||(window.addEventListener("resize",this.handleResizeDebounced),this.handleResize())},c.componentWillUnmount=function(){clearTimeout(this.timeout),window.removeEventListener("resize",this.handleResizeDebounced)},c.componentWillAppear=function(e){this.state.shouldAnimate?this.animateTo(E,e):e()},c.componentWillEnter=function(e){var t=this;this.state.shouldAnimate?(clearTimeout(this.timeout),this.timeout=setTimeout((function(){return t.animateTo(E,e)}),40)):e()},c.componentWillLeave=function(e){this.state.shouldAnimate?this.animateTo(_,e):e()},c.animateTo=function(e,t){i.default.spring(this.anim,h({toValue:e},y)).start(t)},c.getAnimatedStyle=function(e){return this.state.shouldAnimate?{opacity:this.anim,transform:e?void 0:[{scale:this.anim.interpolate({inputRange:[0,1],outputRange:[1.05,1]})},{translateY:this.anim.interpolate({inputRange:[0,1],outputRange:["-70px","0px"]})},{translateZ:0}]}:null},c.render=function(){var t=this;return v(u.AccessibilityPreferencesContext.Consumer,{},void 0,(function(n){var r=n.reducedMotion;return v(i.default.div,{className:f.default.wrapper,style:t.getAnimatedStyle(r.enabled)},void 0,a.createElement(e,t.props))}))},l}(a.Component)};t.default=I},5497:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=m();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=h(n(8)),i=h(n(5498)),u=n(47),l=h(n(5370)),s=n(973),f=h(n(12)),c=n(166),d=n(357),p=n(1),v=h(n(5522));function h(e){return e&&e.__esModule?e:{default:e}}function m(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return m=function(){return e},e}function g(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E=(0,c.cssValueToNumber)(v.default.responsiveWidthMobile),y=[p.Routes.LOGIN,p.Routes.LOGIN_HANDOFF,p.Routes.REGISTER,p.Routes.INVITE(""),p.Routes.GIFT_CODE(""),p.Routes.GUILD_TEMPLATE_LOGIN(""),p.Routes.GUILD_TEMPLATE(""),p.Routes.DISABLE_EMAIL_NOTIFICATIONS,p.Routes.BILLING_PREMIUM_SUBSCRIBE,p.Routes.BILLING_PAYMENT_SOURCES_CREATE,p.Routes.BILLING_PAYMENTS,p.Routes.BILLING_PREMIUM_SWITCH_PLAN,p.Routes.BILLING_GUILD_SUBSCRIPTIONS_PURCHASE,p.Routes.VERIFY,p.Routes.AUTHORIZE_IP,p.Routes.RESET,p.Routes.HANDOFF],I=[p.Routes.APP,p.Routes.ACTIVITY,p.Routes.APPLICATION_LIBRARY,p.Routes.APPLICATION_STORE,"/channels/","/welcome/","/settings/",p.Routes.USERS(""),p.Routes.GUILD_MEMBER_VERIFICATION("")];function O(e){return y.some((function(t){return e.startsWith(t)}))}var T=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).handleResize=function(){n.setState({isMobileWidth:window.innerWidth<=E})},n.updateWaveState=function(e){var t=n.state.waveState;n.setState({waveState:Math.max(t,e)})},n.transitionTo=function(e,t){var r=n.state.waveState;O(e)?(0,u.transitionTo)(e,t):n.setState({route:e,extra:t,waveState:Math.max(r,s.WaveStates.FILLING)})},n.replaceWith=function(e){var t=n.state.waveState;O(e)?(0,u.replaceWith)(e):n.setState({route:e,replaceWith:!0,waveState:Math.max(t,s.WaveStates.FILLING)})},n.state={waveState:s.WaveStates.INITIAL,extra:{},replaceWith:!1,route:null,isMobileWidth:window.innerWidth<=E},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,_(t,n);var c=r.prototype;return c.componentDidMount=function(){window.addEventListener("resize",this.handleResize)},c.componentWillUnmount=function(){window.removeEventListener("resize",this.handleResize)},c.componentDidUpdate=function(e,t){var n=this.state,r=n.waveState,a=n.replaceWith,o=n.extra,i=n.route;if(n.isMobileWidth===t.isMobileWidth&&r===s.WaveStates.FILLED&&r!==t.waveState&&null!=i){if(function(e){return I.some((function(t){return e.startsWith(t)}))}(i))return a?(0,u.replaceWith)(i):(0,u.transitionTo)(i,o);window.location=i}},c.mobileTransitionTo=function(e,t){if(O(e))(0,u.transitionTo)(e,t);else{var n=null!=t&&null!=t.search?t.search:null;window.location=null==n?e:e+"?"+n}},c.mobileReplaceWith=function(e){O(e)?(0,u.replaceWith)(e):window.location=e},c.renderDefault=function(){var e,t=this,n=this.props,r=n.splash,u=n.children,c=this.state,d=c.waveState,p=null;return null==c.route&&(p=a.Children.map(u,(function(e){return a.cloneElement(e,{transitionTo:t.transitionTo,replaceWith:t.replaceWith})}))),g(l.default,{className:(0,o.default)(v.default.splashBackground,(e={},e[v.default.loggingIn]=d>=s.WaveStates.FILLING,e)),splash:r,waveState:d,showLogo:!f.default.isWindows(),updateWaveState:this.updateWaveState,logoClassName:v.default.logo},void 0,g(i.default,{component:a.Fragment},void 0,p))},c.renderMobile=function(){var e=this;return g(i.default,{component:a.Fragment},void 0,a.Children.map(this.props.children,(function(t){return a.cloneElement(t,{transitionTo:e.mobileTransitionTo,replaceWith:e.mobileReplaceWith})})))},c.render=function(){var e=this.state.isMobileWidth,t=navigator.userAgent.includes("GameLauncher");return e||d.isMobile||t?this.renderMobile():this.renderDefault()},r}(a.Component);T.displayName="AuthWrapper";var N=T;t.default=N},5498:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=n(258),i=(r=n(409))&&r.__esModule?r:{default:r};function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,f(t,n),r.prototype.render=function(){var e=this.props,t=e.children,n=e.location,r=e.history,u=e.staticContext,f=(e.match,s(e,["children","location","history","staticContext","match"])),c=null,d=null;return a.Children.forEach(t,(function(e){if(null==c&&a.isValidElement(e)){var t=e.props,i=t.component,f=t.render,p=s(t,["component","render"]),v=p.path||p.from;if(null==(c=null!=v?(0,o.matchPath)(n.pathname,l({},p,{path:v})):null))return;p=l({},p,{key:v,location:n,match:c,history:r,staticContext:u}),null!=i?d=a.createElement(i,p):null!=f&&(d=f(p))}})),a.createElement(i.default,f,d)},r}(a.Component);c.displayName="TransitionSwitch";var d=(0,o.withRouter)(c);t.default=d},5507:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),a=n(5080),o=f(n(3)),i=f(n(423)),u=n(952),l=f(n(10)),s=f(n(5098));function f(e){return e&&e.__esModule?e:{default:e}}function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){var t,n;function o(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={isLogoutRequested:t.props.isAuthenticated},t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,d(t,n);var l=o.prototype;return l.handleHandoff=function(e,t){this.setState({isLogoutRequested:!1},(function(){(0,u.handoffFromApp)(e,t)}))},l.componentDidMount=function(){var e=this,t=this.props.location;if(null!=t){var n=(0,a.parse)(t.search),r=n.handoff_key,o=n.handoff_token;null!=r&&null!=o&&(this.state.isLogoutRequested?i.default.logout(null).finally((function(){e.handleHandoff(r,o)})):this.handleHandoff(r,o))}},l.render=function(){return this.state.isLogoutRequested?null:r.createElement(s.default,this.props)},o}(r.PureComponent);p.displayName="LoginHandoff",p.defaultProps={transitionTo:function(t){return e.location.assign(t)}};var v=o.default.connectStores([l.default],(function(){return{isAuthenticated:l.default.isAuthenticated()}}))(p);t.default=v}).call(this,n(36))},7723:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.NewUserTypes=void 0,t.NewUserTypes=r,function(e){e[e.MARKETING_UNCLAIMED=0]="MARKETING_UNCLAIMED",e[e.INVITE_UNCLAIMED=1]="INVITE_UNCLAIMED",e[e.ORGANIC_REGISTERED=2]="ORGANIC_REGISTERED",e[e.ORGANIC_REGISTERED_GUILD_TEMPLATE=3]="ORGANIC_REGISTERED_GUILD_TEMPLATE"}(r||(t.NewUserTypes=r={}))},7774:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setNewUser=function(e){a.default.wait((function(){return a.default.dispatch({type:o.ActionTypes.NUF_NEW_USER,newUserType:e})}))},t.setNewUserFlowCompleted=function(){a.default.wait((function(){return a.default.dispatch({type:o.ActionTypes.NUF_COMPLETE})}))};var r,a=(r=n(2))&&r.__esModule?r:{default:r},o=n(1)},7865:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=Z;var r,a=U(n(0)),o=B(n(8)),i=n(5080),u=U(n(3)),l=n(71),s=B(n(423)),f=B(n(8125)),c=B(n(8509)),d=B(n(1079)),p=U(n(8510)),v=B(n(976)),h=B(n(5313)),m=n(7774),g=n(7723),_=n(5081),E=B(n(10)),y=B(n(1055)),I=B(n(5298)),O=B(n(965)),T=B(n(60)),N=B(n(322)),S=U(n(419)),A=B(n(105)),b=B(n(19)),R=n(114),C=B(n(5343)),P=B(n(5333)),M=U(n(5316)),w=B(n(5335)),D=n(1),L=B(n(7)),k=B(n(6805)),G=B(n(408));function B(e){return e&&e.__esModule?e:{default:e}}function j(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return j=function(){return e},e}function U(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=j();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function x(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}u.default.initialize();var H=/\.$/,z=function(e){return Array.isArray(e)?e.map((function(e){return e.replace(H,"")})).join(". ").trim():e},K=x(M.InviteResolvingHeader,{}),Y=x(c.default,{fromRegister:!0}),$=function(e){var t,n;function r(t){var n;(n=e.call(this,t)||this).dateOfBirthRef=a.createRef(),n._retryTimer=new l.Timeout,n.handleCaptchaVerify=function(e){return n.setState({captchaKey:e},(function(){return n.handleRegister()}))},n.handleGotoLogin=function(){var e=n.state.email,t=n.props,r=t.onLoginStart,a=t.giftCode,o=t.transitionTo,u=t.invite,l=t.guildTemplate,f=t.redirectTo,c=t.isGuest,d=t.location,p=t.closeRegister,v=t.openLogin;if(c)return void 0!==p&&p(),void(void 0!==v&&v());var h,m=null!=d?(0,i.parse)(d.search):{};null!=u?h=D.Routes.INVITE_LOGIN(u.code):null!=a?h=D.Routes.GIFT_CODE_LOGIN(a.code):null!=l?h=D.Routes.GUILD_TEMPLATE_LOGIN(l.code):null!=f?(h=D.Routes.LOGIN,m.redirect_to=f):(h=D.Routes.LOGIN,""!==e&&(m={email:e})),s.default.loginReset(),o(h,{search:(0,i.stringify)(m)}),null!=r&&r(),R.ComponentDispatch.dispatch(D.ComponentActions.WAVE_EMPHASIZE)},n.handleSubmit=function(e){e&&e.preventDefault(),n.handleRegister()},n.handleBirthdayChange=function(e){n.setState({parsedDateOfBirth:e})};var r=null!=t.location?(0,i.parse)(t.location.search):{};return n.state={email:r.email||"",username:"",password:"",parsedDateOfBirth:null,captchaKey:null,consent:!t.consentRequired,consentRequiredProp:t.consentRequired,isRateLimited:!1},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,W(t,n);var u,f,c,E=r.prototype;return E.hasConsent=function(){var e=this.props.consentRequired,t=this.state.consent;return null!=e&&t},E.componentDidMount=function(){this.redirectIfAuthenticated();var e=this.props,t=e.giftCodeSKU,n=e.invite;b.default.track(D.AnalyticEvents.REGISTER_VIEWED,F({location:null!=n?"Invite Register Page":"Non-Invite Register Page",registration_source:this.registrationSource},null!=t?(0,v.default)(t,!1,!1):{}),{flush:!0}),null==this.props.consentRequired&&s.default.getLocationMetadata(),(0,_.trackAppUIViewed)("register")},E.componentWillUnmount=function(){this._retryTimer.stop()},r.getDerivedStateFromProps=function(e,t){var n=e.consentRequired;return null==t.consentRequiredProp&&null!=n?{consent:!n,consentRequiredProp:n}:{consentRequiredProp:n}},E.componentDidUpdate=function(e,t){var n=this,r=this.props,a=r.apiErrors,o=r.authenticated,i=this.state.parsedDateOfBirth;e.apiErrors===a&&t.parsedDateOfBirth===i||(this.hasError("email")?null!=this.emailRef&&this.emailRef.focus():this.hasError("username")?null!=this.usernameRef&&this.usernameRef.focus():this.hasError("password")?null!=this.passwordRef&&this.passwordRef.focus():null==this.state.parsedDateOfBirth?null!=this.dateOfBirthRef.current&&this.dateOfBirthRef.current.focus():this.hasError("retry_after")&&(this.setState({isRateLimited:!0}),this._retryTimer.start(1e3*this.props.apiErrors.retry_after,(function(){n.setState({isRateLimited:!1})})))),o&&!e.authenticated&&this.redirectIfAuthenticated()},E.redirectIfAuthenticated=function(){var e=this.props,t=e.authenticated,n=e.transitionTo,r=e.redirectTo;t&&((0,m.setNewUser)(g.NewUserTypes.ORGANIC_REGISTERED),n(null!=r?r:I.default.defaultRoute))},E.handleRegister=function(){var e=this.state,t=e.email,n=e.username,r=e.password,a=e.captchaKey,o=e.consent,i=e.parsedDateOfBirth,u=this.props,l=u.invite,s=u.guildTemplate,f=u.giftCode,c=u.consentRequired,d=u.onRegister,v=null!=l?l.code:null,h=null!=f?f.skuId:null;if(null!==c&&(null!=l||null!=i)){R.ComponentDispatch.dispatch(D.ComponentActions.WAVE_EMPHASIZE);var m=null!=l?(0,p.default)({username:n,consent:o,invite:v,giftCodeSKUId:h,captchaKey:a}):(0,p.registerFull)({email:t,username:n,consent:o,password:r,invite:v,guildTemplateCode:null==s?void 0:s.code,giftCodeSKUId:h,captchaKey:a,birthday:i});m.catch((function(){return null})),d&&m.then(d)}},E.hasError=function(e){return null!=this.props.apiErrors[e]},E.renderConsentComponents=function(){var e=this,t=this.state.consent,n=null,r=null;return this.props.consentRequired?r=x(T.default,{className:G.default.marginTop20,align:T.default.Align.CENTER},void 0,x(O.default,{value:t,type:O.default.Types.INVERTED,onChange:function(t,n){return e.setState({consent:n})},className:k.default.checkbox},void 0,x(S.SubText,{},void 0,L.default.Messages.TERMS_PRIVACY_OPT_IN.format({termsURL:D.MarketingURLs.TERMS,privacyURL:D.MarketingURLs.PRIVACY})))):n=x(S.SubText,{className:G.default.marginTop20},void 0,L.default.Messages.TERMS_PRIVACY.format({termsURL:D.MarketingURLs.TERMS,privacyURL:D.MarketingURLs.PRIVACY})),{subText:n,consentText:r}},E.renderInviteResolving=function(){var e=this,t=this.props.authBoxClassName;return x(S.default,{className:t},void 0,K,x(S.Block,{className:G.default.marginTop40},void 0,x(A.default,{},void 0,L.default.Messages.FORM_LABEL_USERNAME),x(N.default,{text:L.default.Messages.AUTH_USERNAME_TOOLTIP,position:N.default.Positions.RIGHT,color:N.default.Colors.BRAND},void 0,(function(t){var n=t.onMouseEnter,r=t.onMouseLeave;return x(S.Input,{autoFocus:!0,className:G.default.marginBottom8,name:"username",value:e.state.username,placeholder:L.default.Messages.FORM_PLACEHOLDER_USERNAME,onChange:function(t){return e.setState({username:t})},onMouseEnter:n,onMouseLeave:r})})),x(S.Button,{className:G.default.marginTop20,disabled:!0},void 0,L.default.Messages.CONTINUE),x(S.Button,{look:S.Button.Looks.LINK,disabled:!0,className:G.default.marginTop8},void 0,L.default.Messages.ALREADY_HAVE_ACCOUNT),x(S.SubText,{disabled:!0,className:G.default.marginTop20},void 0,L.default.Messages.TERMS_PRIVACY.format({termsURL:D.MarketingURLs.TERMS,privacyURL:D.MarketingURLs.PRIVACY}))))},E.renderInvite=function(){var e=this,t=this.props,n=t.invite,r=t.registering,o=t.consentRequired,i=t.authBoxClassName,u=t.apiErrors.username,l=this.state.consent,s=this.renderConsentComponents(),f=s.subText,c=s.consentText,d=x(N.default,{text:!l&&o?L.default.Messages.TERMS_PRIVACY_OPT_IN_TOOLTIP:null},void 0,(function(t){return a.createElement("div",F({className:G.default.marginTop20},t),x(S.Button,{type:"submit",submitting:r,disabled:!e.hasConsent()},void 0,L.default.Messages.CONTINUE))}));return x(S.default,{onSubmit:this.handleSubmit,tag:"form",className:i},void 0,x(M.default,{invite:n}),x(S.Block,{className:G.default.marginTop40},void 0,x(A.default,{error:z(u)},void 0,L.default.Messages.FORM_LABEL_USERNAME),x(N.default,{text:L.default.Messages.AUTH_USERNAME_TOOLTIP,position:N.default.Positions.RIGHT,color:N.default.Colors.BRAND},void 0,(function(t){var n=t.onMouseEnter,r=t.onMouseLeave;return x(S.Input,{autoFocus:!0,className:G.default.marginBottom8,name:"username",value:e.state.username,placeholder:L.default.Messages.FORM_PLACEHOLDER_USERNAME,onChange:function(t){return e.setState({username:t})},error:null!=u?"":null,onMouseEnter:n,onMouseLeave:r})})),c,d,x(S.Button,{look:S.Button.Looks.LINK,onClick:this.handleGotoLogin,className:G.default.marginTop8},void 0,L.default.Messages.ALREADY_HAVE_ACCOUNT),f))},E.renderErrorMessage=function(){var e=this.props.apiErrors.message,t=this.state.isRateLimited;return null!=e&&t?x(S.SubText,{className:(0,o.default)(G.default.marginTop20,k.default.errorMessage)},void 0,e):null},E.renderFull=function(e,t){var n=this,r=this.state,i=r.email,u=r.username,l=r.password,s=r.consent,f=r.parsedDateOfBirth,c=this.props,p=c.registering,v=c.consentRequired,h=c.isGuest,m=c.authBoxClassName,g=c.apiErrors,_=(g=void 0===g?{}:g).email,E=g.username,y=g.password,I=g.date_of_birth,O=this.renderConsentComponents(),T=O.subText,A=O.consentText,b=this.renderErrorMessage(),R=x(N.default,{text:!s&&v?L.default.Messages.TERMS_PRIVACY_OPT_IN_TOOLTIP:null},void 0,(function(e){return a.createElement("div",F({className:G.default.marginTop20},e),x(S.Button,{type:"submit",submitting:p,disabled:!n.hasConsent()||n.state.isRateLimited},void 0,L.default.Messages.CONTINUE))})),C=h?null:null!=e?e():x(S.Title,{},void 0,L.default.Messages.REGISTER_TITLE),P=x(S.Block,{className:G.default.marginTop20},void 0,x(S.Input,{autoFocus:!0,label:L.default.Messages.FORM_LABEL_EMAIL,className:G.default.marginBottom20,name:"email",value:i,onChange:function(e){return n.setState({email:e})},error:z(_),type:"email",setRef:function(e){n.emailRef=e}}),x(S.Input,{label:L.default.Messages.FORM_LABEL_USERNAME,className:G.default.marginBottom20,name:"username",value:u,onChange:function(e){return n.setState({username:e})},error:z(E),setRef:function(e){n.usernameRef=e}}),x(S.Input,{label:L.default.Messages.FORM_LABEL_PASSWORD,name:"password",value:l,onChange:function(e){return n.setState({password:e})},error:z(y),type:"password",setRef:function(e){n.passwordRef=e}}),a.createElement(d.default,{label:L.default.Messages.AGE_GATE_YOUR_BIRTHDAY,wrapperClassName:G.default.marginTop20,name:"date_of_birth",onChange:this.handleBirthdayChange,ref:this.dateOfBirthRef,error:z(I),value:f}),A,R,b,x(S.Button,{look:S.Button.Looks.LINK,onClick:this.handleGotoLogin,className:G.default.marginTop8},void 0,L.default.Messages.ALREADY_HAVE_ACCOUNT),T);return t?x(w.default,{onSubmit:this.handleSubmit,tag:"form",className:(0,o.default)(m,k.default.horizontalAuthBox)},void 0,(function(){return[C,x("div",{className:k.default.flex},void 0,x(S.Title,{className:k.default.createAccountTemplateHeader},void 0,L.default.Messages.REGISTER_TITLE),P)]})):x(S.default,{onSubmit:this.handleSubmit,tag:"form",className:m},void 0,C,P)},E.render=function(){var e=this.props,t=e.isGuest,n=e.authBoxClassName,r=e.isUnderage,a=e.apiErrors,o=a.captcha_service,i=a.captcha_sitekey;if(r||this.hasError("date_of_birth"))return Y;if(this.hasError("captcha_key"))return x(C.default,{authBoxClassName:n,onVerify:this.handleCaptchaVerify,title:t?null:L.default.Messages.REGISTER_TITLE,captchaService:o,sitekey:i});var u=this.props,l=u.invite,s=u.giftCode,f=u.guildTemplate;if(null!=l)return l.state===D.InviteStates.RESOLVING?this.renderInviteResolving():this.renderInvite();var c=x(h.default,{guildTemplate:f});if(null!=f)return this.renderFull((function(){return c}),!0);var d=x(P.default,{giftCode:s});return null!=s?this.renderFull((function(){return d})):this.renderFull()},u=r,(f=[{key:"registrationSource",get:function(){var e=this.props,t=e.giftCode,n=e.guildTemplate,r=e.invite;return null!=t?"gift":null!=n?"guild_template":null!=r?null!=r.guild?"guild_invite":"dm_invite":null}}])&&V(u.prototype,f),c&&V(u,c),r}(a.PureComponent);function Z(e){var t={consentRequired:(0,u.useStateFromStores)([y.default],(function(){return y.default.getAuthenticationConsentRequired()})),registering:(0,u.useStateFromStores)([E.default],(function(){return E.default.getRegisterStatus()===D.RegistrationStates.REGISTERING})),apiErrors:(0,u.useStateFromStores)([E.default],(function(){return E.default.getErrors()})),authenticated:(0,u.useStateFromStores)([E.default],(function(){return E.default.isAuthenticated()})),isUnderage:(0,u.useStateFromStores)([f.default],(function(){return f.default.isUnderageAnonymous()}))};return a.createElement($,F({},e,t))}$.displayName="Register",$.defaultProps={giftCodeResolved:!1,transitionTo:function(t){return e.location.assign(t)}},Z.displayName="ConnectedRegister"}).call(this,n(36))},8077:function(e,t,n){e.exports=n.p+"4b25b64915cb0e74934b6b749445def2.svg"},8125:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(954)),a=l(n(3)),o=l(n(2)),i=l(n(12)),u=n(676);n(1);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=null;var c=new(function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n),a.prototype.isUnderageAnonymous=function(){return i.default.embedded?null!=f&&f+u.AGE_GATE_REGISTER_TIMEOUT_MS>Date.now():null!=r.default.parse(document.cookie).underage},a}(a.default.Store))(o.default,{AGE_GATE_PREVENT_UNDERAGE_REGISTRATION:function(e){return!0,f=Date.now(),void(document.cookie="underage=1;path=/")},LOGIN_SUCCESS:function(e){return!1,f=null,void(document.cookie="underage=1;path=/;max-age=0")}});t.default=c},8403:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(1117),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(1118)),o=n(368),i=c(n(988)),u=c(n(19)),l=c(n(1068)),s=c(n(980)),f=n(1);function c(e){return e&&e.__esModule?e:{default:e}}function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var v=p({},s.default,{openNativeAppModal:function(e){i.default.openNativeAppModal(e,f.RPCCommands.GUILD_TEMPLATE_BROWSER)},openMobileApp:function(e,t){if(!(null!=platform.ua&&platform.ua.toLowerCase().indexOf("googlebot")>-1)){var n=null!=e?(0,r.getGuildTemplateDynamicLinkTemplate)(e):(0,r.getDefaultDynamicLinkTemplate)(),i=(0,a.generateAttemptId)(),s=(0,a.default)(n,{utmSource:"template",fingerprint:t,attemptId:i});u.default.track(f.AnalyticEvents.DEEP_LINK_CLICKED,{fingerprint:(0,o.maybeExtractId)(t),attempt_id:i,source:"template",guild_template_code:e}),l.default.launch(s,(function(){}))}}});t.default=v},8509:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;p(n(0));var r,a=n(47),o=c(n(41)),i=p(n(419)),u=c(n(137)),l=n(1),s=c(n(7)),f=c(n(6804));function c(e){return e&&e.__esModule?e:{default:e}}function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function v(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var h=function(){return(0,a.transitionTo)(l.Routes.LOGIN)},m=function(e){var t=e.authBoxClassName,r=e.underageMessage,a=e.fromRegister;return v(i.default,{className:t},void 0,v("img",{alt:"",src:n(8077),className:f.default.img}),v(i.Title,{className:f.default.title},void 0,s.default.Messages.AGE_GATE_UNDERAGE_HEADER),v(i.SubTitle,{className:f.default.subtitle},void 0,a?s.default.Messages.AGE_GATE_UNDERAGE_BODY_POST_REGISTER_MESSAGE:s.default.Messages.AGE_GATE_UNDERAGE_BODY.format({underageMessage:r||s.default.Messages.AGE_GATE_UNDERAGE_BODY_DEFAULT_MESSAGE,helpURL:u.default.getArticleURL(l.HelpdeskArticles.AGE_GATE)})),v(o.default,{fullWidth:!0,onClick:h},void 0,s.default.Messages.AGE_GATE_UNDERAGE_BACK_TO_LOGIN))};m.displayName="AgeGateUnderage";var g=m;t.default=g},8510:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerPhone=function(e){return h.apply(this,arguments)},t.registerDeferred=function(e){a.default.dispatch({type:s.ActionTypes.REGISTER_SAVE_FORM,form:e})},t.default=function(e){var t=e.invite,n=void 0===t?null:t,r=e.giftCodeSKUId,a=void 0===r?null:r,o=e.captchaKey,i=void 0===o?null:o;return m(d({},function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["invite","giftCodeSKUId","captchaKey"]),{invite:n,giftCodeSKUId:a,captchaKey:i}))},t.registerFull=m;var r=c(n(11)),a=c(n(2)),o=c(n(178)),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(1078)),u=c(n(10)),l=c(n(1113)),s=n(1);function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function c(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t,n,r,a,o,i){try{var u=e[o](i),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,a)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){p(o,r,a,i,u,"next",e)}function u(e){p(o,r,a,i,u,"throw",e)}i(void 0)}))}}function h(){return(h=v(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.phone,e.prev=1,e.next=4,r.default.post({url:s.Endpoints.REGISTER_PHONE,body:{phone:n},oldFormErrors:!0});case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),i=new o.default(e.t0),a.default.dispatch({type:s.ActionTypes.REGISTER_FAILURE,error:i}),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function m(e){var t=e.email,n=e.phoneToken,f=e.username,c=e.consent,d=e.password,p=e.guildTemplateCode,v=e.birthday,h=e.invite,m=void 0===h?null:h,g=e.giftCodeSKUId,_=void 0===g?null:g,E=e.captchaKey,y=void 0===E?null:E,I=e.multiStep,O=void 0!==I&&I;return a.default.dispatch({type:s.ActionTypes.REGISTER,birthday:O?v:null}),null!=v&&(0,l.default)(v,s.AnalyticsSections.REGISTER),r.default.post({url:s.Endpoints.REGISTER,body:{fingerprint:u.default.getFingerprint(),email:t,username:f,password:d,invite:m,consent:c,phone_token:n,date_of_birth:null==v?void 0:v.format("YYYY-MM-DD"),gift_code_sku_id:_,guild_template_code:p,captcha_key:y},oldFormErrors:!0}).then((function(e){a.default.dispatch({type:s.ActionTypes.REGISTER_SUCCESS,token:e.body.token})}),(function(e){var t=new o.default(e);throw a.default.dispatch({type:s.ActionTypes.REGISTER_FAILURE,error:t}),t.fields.hasOwnProperty("date_of_birth")&&i.preventUnderageRegistration(),e}))}},8626:function(e,t,n){"use strict";n.r(t);var r,a=["bottom","height","left","right","top","width"],o=new Map,i=function e(){o.forEach((function(e){e.hasRectChanged&&(e.callbacks.forEach((function(t){return t(e.rect)})),e.hasRectChanged=!1)})),window.setTimeout((function(){o.forEach((function(e,t){var n,r,o=t.getBoundingClientRect();n=o,r=e.rect,void 0===n&&(n={}),void 0===r&&(r={}),a.some((function(e){return n[e]!==r[e]}))&&(e.hasRectChanged=!0,e.rect=o)}))}),0),r=window.requestAnimationFrame(e)};t.default=function(e,t){return{observe:function(){var n=0===o.size;o.has(e)?o.get(e).callbacks.push(t):o.set(e,{rect:void 0,hasRectChanged:!1,callbacks:[t]}),n&&i()},unobserve:function(){var n=o.get(e);if(n){var a=n.callbacks.indexOf(t);a>=0&&n.callbacks.splice(a,1),n.callbacks.length||o.delete(e),o.size||cancelAnimationFrame(r)}}}}},8632:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(3)),a=o(n(2));n(1);function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=null;var l=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var a=r.prototype;return a.initialize=function(e){var t;u=null!==(t=null==e?void 0:e.type)&&void 0!==t?t:null},a.getType=function(){return u},a.getState=function(){return{type:u}},r}(r.default.PersistedStore);l.persistKey="nuf";var s=new l(a.default,{NUF_NEW_USER:function(e){var t=e.newUserType;u=t},NUF_COMPLETE:function(e){u=null}});t.default=s},8729:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=f;var r,a,o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=(r=n(42))&&r.__esModule?r:{default:r};function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=r;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function f(e){var t=e.width,n=void 0===t?20:t,r=e.height,a=void 0===r?20:r,u=e.color,f=void 0===u?"currentColor":u,c=e.foreground,d=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["width","height","color","foreground"]);return o.createElement("svg",l({},(0,i.default)(d),{width:n,height:a,viewBox:"0 0 20 20"}),s("g",{fill:"none",fillRule:"evenodd"},void 0,s("path",{className:c,fill:f,d:"M10 0C4.4764 0 0 4.4764 0 10C0 15.5236 4.4764 20 10 20C15.5236 20 20 15.5236 20 10C20 4.4764 15.5236 0 10 0ZM10 3.6C10.4422 3.6 10.8 3.95781 10.8 4.4V9.5376L14.5625 11.7126C14.9453 11.9329 15.0703 12.4173 14.85 12.8001C14.6297 13.183 14.1453 13.3079 13.7625 13.0876L9.68726 10.7376C9.65601 10.7251 9.62788 10.7048 9.59976 10.6876C9.3607 10.5486 9.19976 10.2954 9.19976 10.0001V4.4001C9.19976 3.9579 9.55781 3.6 10 3.6Z"})))}f.displayName="Clock"},8742:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.hash?(0,r.parse)(e.hash):null;if(t&&null!=t.token)return t.token;var n=e.search?(0,r.parse)(e.search):null;if(n&&null!=n.token)return n.token;return null};var r=n(5080)},9346:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidMobileCodedLinkInner=E,t.default=y;var r,a=g(n(0)),o=h(n(8)),i=h(n(410)),u=h(n(60)),l=g(n(419)),s=h(n(61)),f=n(1),c=h(n(7)),d=h(n(7359)),p=h(n(972)),v=h(n(408));function h(e){return e&&e.__esModule?e:{default:e}}function m(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return m=function(){return e},e}function g(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=m();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function _(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function E(e){var t=e.text,r=e.buttonCta,h=e.onClick;return a.createElement(a.Fragment,null,_(l.Image,{src:n(10745)}),_(l.Title,{className:(0,o.default)(v.default.marginTop20,v.default.marginBottom8,p.default.flexCenter)},void 0,c.default.Messages.DISCORD_DESC_SHORT),_(l.SubTitle,{className:v.default.marginBottom40},void 0,c.default.Messages.DISCORD_DESC_LONG),_(i.default,{className:d.default.card,type:i.default.Types.CUSTOM},void 0,_("img",{alt:"",className:d.default.cardAccentLeft,src:n(10746)}),_("img",{alt:"",className:d.default.cardAccentRight,src:n(10747)}),_(u.default,{className:d.default.cardContents,direction:u.default.Direction.VERTICAL,align:u.default.Align.STRETCH,grow:0},void 0,_(s.default,{tag:"strong",className:d.default.buttonTitle,size:s.default.Sizes.SIZE_16,style:{color:f.Colors.PRIMARY_DARK_300}},void 0,t),_(l.Button,{className:d.default.button,onClick:h},void 0,r))))}function y(e){var t=e.text,n=e.buttonCta,r=e.theme,a=void 0===r?f.ThemeTypes.DARK:r,o=e.onClick;return _(l.default,{theme:a},void 0,_(E,{text:t,buttonCta:n,onClick:o}))}y.displayName="InvalidMobileCodedLink"},9347:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),a=i(n(2)),o=n(1);function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l={};var s=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,u(t,n),r.prototype.getState=function(e){return l[e]},r}(r.default.Store))(a.default,{NATIVE_APP_MODAL_OPENING:function(e){var t=e.code;l[t]=o.NativeAppStates.OPENING},NATIVE_APP_MODAL_OPENED:function(e){var t=e.code;l[t]=o.NativeAppStates.OPEN},NATIVE_APP_MODAL_OPEN_FAILED:function(e){var t=e.code;l[t]=o.NativeAppStates.OPEN_FAIL}});t.default=s},9348:function(e,t,n){e.exports=n.p+"e0c782560fd96acd7f01fda1f8c6ff24.svg"},9349:function(e,t,n){e.exports=n.p+"375217725f8ad1df6310e6738a7306e4.svg"},9583:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openApp=k,t.default=void 0;var r,a=T(n(0)),o=T(n(3)),i=I(n(1004)),u=n(947),l=I(n(9584)),s=n(5081),f=I(n(10)),c=I(n(975)),d=I(n(225)),p=T(n(419)),v=I(n(19)),h=I(n(9346)),m=I(n(5316)),g=n(1),_=I(n(7)),E=I(n(7360)),y=I(n(10748));function I(e){return e&&e.__esModule?e:{default:e}}function O(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return O=function(){return e},e}function T(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=O();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function N(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}o.default.initialize();var A=(0,u.registerUserExperiment)({id:u.Experiments.INVITE_MARKETING_VALUE_PROPS,title:"Invite: Marketing Value Props",description:["Give users more information why they should join a Discord server","Treatment 1: Server Banner + Description","Treatment 2: Server Banner + Description + Long Value Props","Treatment 3: Server Banner + Description + Short Value Props"],buckets:[u.ExperimentBuckets.CONTROL,u.ExperimentBuckets.TREATMENT_1,u.ExperimentBuckets.TREATMENT_2,u.ExperimentBuckets.TREATMENT_3]}),b=new Map;b.set("pogostl",{serverDescription:"Check out the Pokemon GO St. Louis community on Discord - free text and voice chat app used by 250M people."}),b.set("pogoarizona",{serverDescription:"Check out the Pokemon GO Arizona community on Discord - free text and voice chat app used by 250M people."}),b.set("pogohouston",{serverDescription:"Check out the Pokemon GO Houston community on Discord - free text and voice chat app used by 250M people."}),b.set("pogolacounty",{serverDescription:"Check out the Pokemon GO LA community on Discord - free text and voice chat app used by 250M people."});var R=N("path",{d:"M1.9 4.26H0V11.2941H1.9V4.26Z"}),C=N("path",{d:"M17.1 0V1.12659L2.85 4.26447V14.1176C2.85 14.5496 3.1464 14.9252 3.5701 15.0315L7.3701 15.9727C7.4461 15.9906 7.524 16 7.6 16C7.89545 16 8.1776 15.8635 8.36 15.6235L10.7065 12.5242L17.1 13.9304V15.0588H19V0H17.1ZM7.2181 13.9944L4.75 13.3826V11.2113L8.67065 12.0753L7.2181 13.9944Z"});function P(e){return a.createElement("svg",S({},e,{viewBox:"0 0 19 16",xmlns:"http://www.w3.org/2000/svg"}),R,C)}P.displayName="AnnouncementsIcon";var M=N("path",{d:"M13.616 4.72429C13.5133 4.47506 13.2693 4.31203 13 4.31203H9.41199L7.59599 0.672571C7.36999 0.220227 6.62933 0.220227 6.40333 0.672571L4.58799 4.31203H0.999993C0.730659 4.31203 0.486659 4.47506 0.383993 4.72429C0.281326 4.97351 0.337993 5.26215 0.528659 5.45258L3.58466 8.51542L2.35933 12.815C2.28266 13.0843 2.38133 13.3729 2.60666 13.538C2.83333 13.7037 3.13799 13.7097 3.36933 13.554L6.99999 11.1286L10.63 13.554C10.742 13.6288 10.8707 13.6663 11 13.6663C11.138 13.6663 11.276 13.6235 11.3933 13.538C11.6187 13.3729 11.7173 13.0843 11.6407 12.815L10.4153 8.51542L13.4713 5.45258C13.662 5.26215 13.7187 4.97351 13.616 4.72429Z"});function w(e){return a.createElement("svg",S({},e,{viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"}),M)}w.displayName="StarIcon";var D=N("path",{d:"M1.33331 2.66663V3.66663C1.33331 6.43329 2.80665 8.85329 4.99998 10.2V13.3333H15V12C15 10.2266 11.4466 9.33329 9.66665 9.33329C9.66665 9.33329 9.55331 9.33329 9.49998 9.33329C6.33331 9.33329 3.66665 6.66663 3.66665 3.66663V2.66663H1.33331ZM9.66665 2.66663C8.19389 2.66663 6.99998 3.86053 6.99998 5.33329C6.99998 6.80605 8.19389 7.99996 9.66665 7.99996C11.1394 7.99996 12.3333 6.80605 12.3333 5.33329C12.3333 3.86053 11.1394 2.66663 9.66665 2.66663Z"});function L(e){return a.createElement("svg",S({},e,{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"}),D)}function k(e,t,n){e.preventDefault(),v.default.track(g.AnalyticEvents.INVITE_APP_OPENED,{invite_code:t,guild_id:(null==n?void 0:n.guild)?n.guild.id:null,channel_id:(null==n?void 0:n.channel)?n.channel.id:null,inviter_id:(null==n?void 0:n.inviter)?n.inviter.id:null});var r=null!=n&&n.state!==g.InviteStates.EXPIRED&&n.state!==g.InviteStates.BANNED?t:void 0,a=f.default.getFingerprint(),o=null!=a?a:f.default.getId();i.default.openApp(r,void 0,o)}L.displayName="FriendsIcon";var G=N(d.default,{});function B(e){return N(p.default,{theme:e.theme},void 0,G)}B.displayName="InviteSpinner";var j=N(P,{fill:"#7289DA",width:"14"}),U=N(w,{fill:"#FAA61A",width:"15"}),x=N(L,{fill:"#43B581",width:"16"});function F(e){var t,n,r,a,o,i,s=(t=e.inviteCode,n=b.get(t),r=null!=n,a=(0,u.useAndTrackExposureToUserExperiment)(S({},A,{clientFilter:{isEligible:function(){return r}}})),o=null!=n?n.serverDescription:null,{active:i=r&&a!==u.ExperimentBuckets.CONTROL&&a!==u.ExperimentBuckets.NOT_ELIGIBLE,serverDescription:o,showServerDescription:i,showServerBanner:i,showServerValueProps:i&&(a===u.ExperimentBuckets.TREATMENT_2||a===u.ExperimentBuckets.TREATMENT_3),shortValueProps:i&&a===u.ExperimentBuckets.TREATMENT_2}),f=[{key:"announcements",labelShort:_.default.Messages.INVITE_POKEMON_GO_ANNOUNCEMENTS_LABEL_SHORT.format(),labelLong:_.default.Messages.INVITE_POKEMON_GO_ANNOUNCEMENTS_LABEL_LONG.format(),icon:j},{key:"strategy",labelShort:_.default.Messages.INVITE_POKEMON_GO_STRATEGY_LABEL_SHORT.format(),labelLong:_.default.Messages.INVITE_POKEMON_GO_STRATEGY_LABEL_LONG.format(),icon:U},{key:"friendship",labelShort:_.default.Messages.INVITE_POKEMON_GO_FRIENDSHIP_LABEL_SHORT.format(),labelLong:_.default.Messages.INVITE_POKEMON_GO_FRIENDSHIP_LABEL_LONG.format(),icon:x}];return N(p.default,{theme:e.theme,mobileBanner:s.showServerBanner?y.default:null},void 0,N(m.default,{invite:e.invite,description:s.active?s.serverDescription:null,flatActivityCount:s.active}),s.showServerValueProps&&N("ul",{className:E.default.valueProps},void 0,f.map((function(e){return N("li",{className:E.default.valuePropItem},e.key,N("span",{className:E.default.valuePropIcon},void 0,e.icon),N("span",{className:E.default.valuePropLabel},void 0,s.shortValueProps?e.labelShort:e.labelLong))}))),N(p.Button,{onClick:function(t){return k(t,e.inviteCode,e.invite)},className:E.default.acceptButton},void 0,_.default.Messages.INSTANT_INVITE_ACCEPT),N(l.default,{invite:e.invite,className:E.default.expirationNotice}))}F.displayName="ValidInvite";var V=function(e){var t=e.inviteCode,n=(0,o.useStateFromStores)([c.default],(function(){return c.default.getInvite(t)}));if(a.useEffect((function(){v.default.track(g.AnalyticEvents.INVITE_VIEWED,{},{flush:!0}),(0,s.trackAppUIViewed)("invite_mobile")}),[]),null==n)return N(F,{theme:g.ThemeTypes.DARK,invite:n,inviteCode:t});switch(n.state){case g.InviteStates.EXPIRED:return N(h.default,{text:_.default.Messages.INVITE_INVALID_ERROR,buttonCta:_.default.Messages.INVITE_INVALID_CTA,onClick:function(e){return k(e,t,n)}});case g.InviteStates.BANNED:return N(h.default,{text:_.default.Messages.AUTH_BANNED_INVITE_BODY,buttonCta:_.default.Messages.INVITE_INVALID_CTA,onClick:function(e){return k(e,t,n)}});case g.InviteStates.RESOLVING:return N(B,{theme:g.ThemeTypes.DARK});default:return N(F,{theme:g.ThemeTypes.DARK,invite:n,inviteCode:t})}};t.default=V},9584:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;!function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=v();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n)}(n(0));var r,a=p(n(8)),o=p(n(5)),i=n(101),u=n(10743),l=p(n(8729)),s=p(n(61)),f=p(n(10744)),c=p(n(7)),d=p(n(7358));function p(e){return e&&e.__esModule?e:{default:e}}function v(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return v=function(){return e},e}function h(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var m=function(e){var t=e.expiredAt,n=e.className;if(u.ExpirationNoticeMobileWebExperiment.trackExposure({}),!u.ExpirationNoticeMobileWebExperiment.useExperiment({})[0].showExpirationNotice)return null;var r=(0,o.default)(t).fromNow(!0);return h("div",{className:(0,a.default)(d.default.container,n)},void 0,h("div",{className:d.default.expirationContainer},void 0,h(l.default,{color:i.Colors.WHITE,width:14,height:14,className:d.default.clock}),h(s.default,{size:s.default.Sizes.SIZE_14,color:s.default.Colors.HEADER_PRIMARY},void 0,c.default.Messages.INVITE_EXPIRATION_NOTICE.format({duration:r}))))};m.displayName="InviteExpirationNotice";var g=function(e){var t=e.invite,n=e.className,r=(0,f.default)(t);return null==r?null:h(m,{expiredAt:r,className:n})};g.displayName="InviteExpirationNoticeWrapper";var _=g;t.default=_},9585:function(e,t,n){e.exports=n.p+"17192d3fe939ecf404e8cdd64b340469.svg"},9586:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e){var t,n=null===(t=r.default.os)||void 0===t?void 0:t.family;if("Android"===n||"iOS"===n){var i=l.default.getFingerprint(),u=(0,o.generateAttemptId)();return(0,o.default)((0,a.getDefaultDynamicLinkTemplate)(),{utmSource:e,fingerprint:i,attemptId:u})}return"discord://"}(e),n=(0,o.parseDynamicLink)(t);null!=n&&f.default.track(d.AnalyticEvents.DEEP_LINK_CLICKED,{fingerprint:(0,i.maybeExtractId)(n.fingerprint),attempt_id:n.attemptId,source:n.utmSource});c.default.launch(t,(function(e){e||(0,u.replaceWith)(s.default.fallbackRoute)}))};var r=v(n(55)),a=n(1117),o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(1118)),i=n(368),u=n(47),l=v(n(10)),s=v(n(5298)),f=v(n(19)),c=v(n(1068)),d=n(1);function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function v(e){return e&&e.__esModule?e:{default:e}}},9587:function(e,t,n){e.exports=n.p+"bdcfee0c4d9fb22ce3c47b593df14254.svg"},9588:function(e,t,n){e.exports=n.p+"ab4f6c12a1ced9de8b5d279056f21334.svg"}}]);
//# sourceMappingURL=d140556cb5950b020688.js.map