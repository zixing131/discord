(this.webpackJsonp=this.webpackJsonp||[]).push([[7],{5082:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTrialOffer=p,t.usePremiumTrialOffer=function(){return p(s.PREMIUM_SUBSCRIPTION_TRIAL_ID)};var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(0)),a=r(3),o=r(71),i=l(r(14)),u=l(r(5306)),s=r(1);function l(e){return e&&e.__esModule?e:{default:e}}function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function c(e){return null!=e&&null!=e.expires_at&&Date.now()>Date.parse(e.expires_at)}function p(e){var t=(0,a.useStateFromStores)([u.default],(function(){return u.default.getUserTrialOffer(e)})),r=n.useState(c(t)),s=r[0],l=r[1],f=(0,a.useStateFromStores)([i.default],(function(){var e;return null===(e=i.default.getNullableCurrentUser())||void 0===e?void 0:e.hasPremiumPerks}));return n.useEffect((function(){var e;if(null!=t&&null!=t.expires_at){e=new o.Timeout;!function r(){var n,a=null!=t.expires_at?Date.parse(t.expires_at)-Date.now():0;null===(n=e)||void 0===n||n.start(a,(function(){!s&&c(t)?l(!0):r()}))}()}return function(){var t;return null===(t=e)||void 0===t?void 0:t.stop()}}),[s,t]),s||f?null:t}},5166:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=d(r(11)),a=d(r(25)),o=d(r(2)),i=d(r(5367)),u=d(r(19)),s=r(173),l=d(r(979)),f=r(425),c=r(1),p=d(r(7));function d(e){return e&&e.__esModule?e:{default:e}}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function v(e,t){void 0===t&&(t=null),o.default.dispatch({type:c.ActionTypes.USER_SETTINGS_MODAL_INIT,section:e,subsection:t})}var O={open:function(e,t,r){void 0===e&&(e=null),void 0===t&&(t=null),void 0===r&&(r={openWithoutBackstack:!1}),v(e,t),(0,f.pushLayer)(c.Layers.USER_SETTINGS)},init:v,close:function(){var e=i.default.onClose;o.default.dispatch({type:c.ActionTypes.USER_SETTINGS_MODAL_CLOSE}),null!=e&&e()},setSection:function(e,t){void 0===t&&(t=null),o.default.dirtyDispatch({type:c.ActionTypes.USER_SETTINGS_MODAL_SET_SECTION,section:e,subsection:t})},updateAccount:function(e){o.default.dispatch({type:c.ActionTypes.USER_SETTINGS_MODAL_UPDATE_ACCOUNT,settings:e})},submitComplete:function(){o.default.dispatch({type:c.ActionTypes.USER_SETTINGS_MODAL_SUBMIT_COMPLETE})},reset:function(){o.default.dispatch({type:c.ActionTypes.USER_SETTINGS_MODAL_RESET})},saveAccountChanges:function(e,t){var r=this;o.default.dispatch({type:c.ActionTypes.USER_SETTINGS_MODAL_SUBMIT});var i=e.username,f=e.email,d=e.password,v=e.avatar,O=e.newPassword,T=e.discriminator,m=t.close;return(0,l.default)({title:p.default.Messages.TWO_FA_CHANGE_ACCOUNT},(function(e){var t=_({username:i,email:f,password:d,avatar:v,new_password:O},e),r=T?_({},t,{discriminator:T}):_({},t),o=a.default.get(c.DEVICE_TOKEN);null!=c.DEVICE_PUSH_PROVIDER&&null!=o&&(r.push_provider=c.DEVICE_PUSH_PROVIDER,r.push_token=o);var u=a.default.get(c.DEVICE_VOIP_TOKEN);return null!=c.DEVICE_PUSH_VOIP_PROVIDER&&null!=u&&(r.push_voip_provider=c.DEVICE_PUSH_VOIP_PROVIDER,r.push_voip_token=u),n.default.patch({url:c.Endpoints.ME,body:r,oldFormErrors:!0})}),{checkEnabled:!1,hooks:{onEarlyClose:function(){return o.default.dispatch({type:c.ActionTypes.USER_SETTINGS_MODAL_SUBMIT_FAILURE,errors:{}})}}}).then((function(e){var t=e.body,n=t.token;return u.default.track(c.AnalyticEvents.USER_AVATAR_UPDATED,{animated:(0,s.hasAnimatedAvatar)(t)}),delete t.token,o.default.dispatch({type:c.ActionTypes.UPDATE_TOKEN,token:n}),o.default.dispatch({type:c.ActionTypes.CURRENT_USER_UPDATE,user:t}),m?r.close():r.submitComplete(),e}),(function(e){return o.default.dispatch({type:c.ActionTypes.USER_SETTINGS_MODAL_SUBMIT_FAILURE,errors:e.body}),e}))}};t.default=O},5306:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(3)),a=o(r(2));r(1);function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u={userTrialOffersFetchedDate:{},userTrialOffers:{}},s=u;var l=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,i(t,r);var a=n.prototype;return a.initialize=function(e){s=e||u},a.getUserTrialOffer=function(e){return s.userTrialOffers[e]},a.hasFetchedOffer=function(e){return null!=s.userTrialOffersFetchedDate[e]},a.shouldFetchOffer=function(e){var t=s.userTrialOffersFetchedDate[e];return null==t||Date.now()-1728e5>t},a.getUnacknowledgedOffers=function(){return Object.values(s.userTrialOffers).filter((function(e){return null==e.expires_at}))},a.getState=function(){return s},n}(n.default.PersistedStore);l.persistKey="UserTrialStore";var f=new l(a.default,{BILLING_USER_TRIAL_OFFER_FETCH_SUCCESS:function(e){var t=e.trialId,r=e.userTrialOffer;null!=r&&(s.userTrialOffers[t]=r),s.userTrialOffersFetchedDate[t]=Date.now()},BILLING_USER_TRIAL_OFFER_ACKNOWLEDGED_SUCCESS:function(e){var t=e.userTrialOffer;s.userTrialOffers[t.trial_id]=t,s.userTrialOffersFetchedDate[t.trial_id]=Date.now()},LOGOUT:function(e){return s.userTrialOffers={},void(s.userTrialOffersFetchedDate={})}});t.default=f},5367:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(r(6)),a=s(r(3)),o=s(r(2)),i=s(r(14)),u=r(1);function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var p=u.FormStates.CLOSED,d=null,_={},v={},O=null,T=null,m=!1,S=!1,y=null,E=null,h=null;function U(e){var t,r,n=i.default.getCurrentUser();if(null==n)return b();d=e.section||d,null!=e.subsection&&null!=d&&(_[d]=e.subsection),S=!!e.openWithoutBackstack,p=u.FormStates.OPEN,v={},(t={})[u.UserSettingsSections.ACCOUNT]={userId:n.id,username:n.username,discriminator:n.discriminator,email:n.email,avatar:n.avatar,password:"",newPassword:null,claimed:n.isClaimed()},T=c({},O=t),E=e.onClose||null,h=null!==(r=e.analyticsLocation)&&void 0!==r?r:null}function b(){p=u.FormStates.CLOSED,m=!1,O=null,T=null,d=null,_={},E=null,h=null}function I(){p=u.FormStates.OPEN,v={}}var g=new(function(e){var t,r;function a(){return e.apply(this,arguments)||this}r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,f(t,r);var o,s,c,U=a.prototype;return U.initialize=function(){this.waitFor(i.default)},U.hasChanges=function(){return null!=T&&null!=O&&(!(!this.isOpen()&&y!==u.DrawerTabTypes.USER_SETTINGS)&&!n.default.isEqual(T,O))},U.isOpen=function(){return m},U.getSection=function(){return d},U.shouldOpenWithoutBackstack=function(){return S},U.getProps=function(){return{submitting:p===u.FormStates.SUBMITTING,section:d,subsection:null!=_&&null!=d?_[d]:null,settings:T,errors:v,hasChanges:this.hasChanges(),openWithoutBackstack:S,analyticsLocation:h}},o=a,(s=[{key:"onClose",get:function(){return E}}])&&l(o.prototype,s),c&&l(o,c),a}(a.default.Store))(o.default,{USER_SETTINGS_MODAL_OPEN:function(e){m=!0,U(e)},USER_SETTINGS_MODAL_INIT:U,USER_SETTINGS_MODAL_CLOSE:function(e){return b()},LOGOUT:function(e){return b()},USER_SETTINGS_MODAL_SUBMIT:function(e){p=u.FormStates.SUBMITTING},USER_SETTINGS_MODAL_SUBMIT_FAILURE:function(e){if(p!==u.FormStates.SUBMITTING)return!1;p=u.FormStates.OPEN,d=u.UserSettingsSections.ACCOUNT,v=e.errors||{}},USER_SETTINGS_MODAL_SET_SECTION:function(e){d=e.section,null!=e.subsection&&(_[d]=e.subsection)},USER_SETTINGS_MODAL_UPDATE_ACCOUNT:function(e){var t=e.settings;null==T&&(T={});var r=T[u.UserSettingsSections.ACCOUNT];T[u.UserSettingsSections.ACCOUNT]=c({},r,{},t)},USER_SETTINGS_MODAL_SUBMIT_COMPLETE:function(e){return I()},USER_SETTINGS_MODAL_RESET:function(e){return r=i.default.getCurrentUser(),I(),void(r&&((t={})[u.UserSettingsSections.ACCOUNT]={userId:r.id,username:r.username,discriminator:r.discriminator,email:r.email,avatar:r.avatar,password:"",newPassword:null,claimed:r.isClaimed()},T=c({},O=t)));var t,r},DRAWER_SELECT_TAB:function(e){return y=e.tab,null==d&&y===u.DrawerTabTypes.USER_SETTINGS&&U({type:u.ActionTypes.USER_SETTINGS_MODAL_INIT,section:null,subsection:null,openWithoutBackstack:!1})}});t.default=g},7444:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transformNativeFile=function(e,t){if(e instanceof File)return e;return c(e.data,e.filename,t)},t.makeFile=c,t.classifyFile=function(e){return d(e.name,e.type)},t.classifyFileName=d,t.sizeString=function(e){return n.default.filesize(e)},t.maxFileSize=_,t.anyFileTooLarge=function(e,t){var r=_(t);return Array.from(e).some((function(e){return e.size>r}))};var n=f(r(7886)),a=f(r(6)),o=f(r(55)),i=f(r(23)),u=f(r(14)),s=f(r(124)),l=r(1);function f(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n){if(null==t&&(t="unknown",e instanceof Blob))switch(e.type){case"image/png":t+=".png"}if(null==n){e instanceof Blob&&(n=e.type);var a=r(8759);n=n||a.lookup(t)}if("function"!=typeof File||"Microsoft Edge"===o.default.name){var i=new Date,u=0;return null!=e.size&&"number"==typeof e.size?u=e.size:null!=e.byteLength&&"number"==typeof e.byteLength&&(u=e.byteLength),{lastModified:i.getTime(),lastModifiedDate:i,name:t,size:u,type:n}}return new File([e],t,{type:n})}var p=[{reType:/^image\/vnd.adobe.photoshop/,klass:"photoshop"},{reType:/^image\/svg\+xml/,klass:"webcode"},{reType:/^image\//,klass:"image"},{reType:/^video\//,klass:"video"},{reName:/\.pdf$/,klass:"acrobat"},{reName:/\.ae/,klass:"ae"},{reName:/\.sketch$/,klass:"sketch"},{reName:/\.ai$/,klass:"ai"},{reName:/\.(?:rar|zip|7z|tar|tar\.gz)$/,klass:"archive"},{reName:/\.(?:c\+\+|cpp|cc|c|h|hpp|mm|m|json|js|rb|rake|py|asm|fs|pyc|dtd|cgi|bat|rss|java|graphml|idb|lua|o|gml|prl|sls|conf|cmake|make|sln|vbe|cxx|wbf|vbs|r|wml|php|bash|applescript|fcgi|yaml|ex|exs|sh|ml|actionscript)$/,klass:"code"},{reName:/\.(?:txt|rtf|doc|docx|md|pages|ppt|pptx|pptm|key|log)$/,klass:"document"},{reName:/\.(?:xls|xlsx|numbers|csv)$/,klass:"spreadsheet"},{reName:/\.(?:html|xhtml|htm|js|xml|xls|xsd|css|styl)$/,klass:"webcode"},{reName:/\.(?:mp3|ogg|wav|flac)$/,klass:"audio"}];function d(e,t){e=e?e.toLowerCase():"";var r=a.default.find(p,(function(r){return r.reType&&t?r.reType.test(t):!(!r.reName||!e)&&r.reName.test(e)}));return r?r.klass:"unknown"}function _(e){var t=u.default.getCurrentUser(),r=s.default.getUserMaxFileSize(t);if(null==e)return r;var n=i.default.getGuild(e),a=null!=n?l.PremiumGuildLimits[n.premiumTier].fileSize:l.MAX_ATTACHMENT_SIZE;return Math.max(a,r)}},7690:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=T();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(0)),o=O(r(8)),i=O(r(345)),u=O(r(5166)),s=r(5082),l=O(r(369)),f=O(r(97)),c=O(r(19)),p=r(1),d=O(r(7)),_=O(r(6653)),v=O(r(6606));function O(e){return e&&e.__esModule?e:{default:e}}function T(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return T=function(){return e},e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var y=function(){var e=(0,s.usePremiumTrialOffer)();return S("div",{className:_.default.premiumPromo},void 0,S(f.default,{onClick:function(){c.default.track(p.AnalyticEvents.PREMIUM_PROMOTION_OPENED,{location_page:null,location_section:p.AnalyticsSections.FILE_UPLOAD_POPOUT}),i.default.pop(),u.default.open(p.UserSettingsSections.PREMIUM)},className:_.default.content},void 0,null!=e?d.default.Messages.PREMIUM_UPLOAD_PROMO_TRIAL.format({maxUploadPremium:d.default.Messages.FILE_UPLOAD_LIMIT_PREMIUM_TIER_2}):d.default.Messages.PREMIUM_UPLOAD_PROMO.format({maxUploadPremium:d.default.Messages.FILE_UPLOAD_LIMIT_PREMIUM_TIER_2}),S("img",{alt:"",className:_.default.navArrow,src:r(8172)})))};y.displayName="PremiumPromo";var E=S(y,{}),h=function(e){var t,r;function n(){return e.apply(this,arguments)||this}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,m(t,r),n.prototype.render=function(){var e=this.props.promo;return S("div",{className:v.default.uploadModalIn},void 0,S("div",{className:(0,o.default)(v.default.uploadDropModal,v.default.error)},void 0,S("div",{className:v.default.inner},void 0,S("div",{className:v.default.icons},void 0,S("div",{className:v.default.wrapOne},void 0,S("div",{className:(0,o.default)(v.default.icon,v.default.one)})),S("div",{className:v.default.wrapThree},void 0,S("div",{className:(0,o.default)(v.default.icon,v.default.three)})),S("div",{className:v.default.wrapTwo},void 0,S("div",{className:(0,o.default)(v.default.icon,v.default.two)}))),S("div",{className:v.default.title},void 0,this.props.title),S("div",{className:v.default.instructions},void 0,this.props.help),e?E:null)))},n}(a.Component);h.displayName="UploadError",h.modalConfig={backdropStyle:l.default.Styles.DARK,backdropInstant:!0};var U=h;t.default=U},7813:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=d(r(0)),a=c(r(8758)),o=c(r(345)),i=c(r(7690)),u=c(r(96)),s=d(r(7444)),l=c(r(12)),f=c(r(7));function c(e){return e&&e.__esModule?e:{default:e}}function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function d(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=["openFile"];e.multiple&&t.push("multiSelections");var r=e.filters;u.default.fileManager.openFiles({properties:t,filters:r},e.maxSize,s.makeFile).then((function(t){null!=(t=t.map((function(e){return s.transformNativeFile(e)})))&&e.onChange({stopPropagation:function(){return null},preventDefault:function(){return null},currentTarget:{files:t}})}),(function(t){if("ETOOLARGE"!==t.code)throw t;o.default.push(i.default,{title:f.default.Messages.UPLOAD_AREA_TOO_LARGE_TITLE,help:f.default.Messages.UPLOAD_AREA_TOO_LARGE_HELP.format({maxSize:s.sizeString(e.maxSize)})})}))}var T=function(e){var t,r;function o(t){var r;return(r=e.call(this,t)||this).setRef=r.setRef.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r)),r}r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,v(t,r);var i=o.prototype;return i.activateUploadDialogue=function(){if(this._ref)return this._ref.activateUploadDialogue()},i.setRef=function(e){this._ref=e},i.render=function(){return n.createElement(a.default,_({ref:this.setRef,handleNativeClick:O,embedded:l.default.isDesktop()},this.props))},o}(n.Component);T.displayName="FileInput";var m=T;t.default=m},8172:function(e,t,r){e.exports=r.p+"c83861b2303b7ee40c419e9590d57f11.svg"}}]);
//# sourceMappingURL=c7d08048f7f18ef62c07.js.map